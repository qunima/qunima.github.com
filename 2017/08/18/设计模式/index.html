<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  

  
  <title>è®¾è®¡æ¨¡å¼ | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="å†™ç»™å¤§å®¶çœ‹çš„è®¾è®¡æ¨¡å¼ã€‚">
<meta name="keywords" content="è®¾è®¡æ¨¡å¼">
<meta property="og:type" content="article">
<meta property="og:title" content="è®¾è®¡æ¨¡å¼">
<meta property="og:url" content="http://yoursite.com/2017/08/18/è®¾è®¡æ¨¡å¼/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="å†™ç»™å¤§å®¶çœ‹çš„è®¾è®¡æ¨¡å¼ã€‚">
<meta property="og:locale" content="default">
<meta property="og:updated_time" content="2017-08-18T02:24:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="è®¾è®¡æ¨¡å¼">
<meta name="twitter:description" content="å†™ç»™å¤§å®¶çœ‹çš„è®¾è®¡æ¨¡å¼ã€‚">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-è®¾è®¡æ¨¡å¼" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2017/08/18/è®¾è®¡æ¨¡å¼/" class="article-date">
  <time datetime="2017-08-18T02:06:34.000Z" itemprop="datePublished">2017-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      è®¾è®¡æ¨¡å¼
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>å†™ç»™å¤§å®¶çœ‹çš„è®¾è®¡æ¨¡å¼ã€‚<br><a id="more"></a></p>
<blockquote>
<p>åŸæ–‡æ”¶å½•åœ¨<a href="http://pushmind.org/2017/07/31/design-patterns-for-humans/" target="_blank" rel="noopener">æˆ‘çš„åšå®¢</a>, æ¬¢è¿å…‰ä¸´.</p>
</blockquote>
<p>æœ¬æ–‡æ˜¯é’ˆå¯¹ <a href="https://github.com/kamranahmedse/design-patterns-for-humans" target="_blank" rel="noopener">https://github.com/kamranahmeâ€¦</a> çš„ç¿»è¯‘ä¸ç¬”è®°, ä¼šç»“åˆéƒ¨åˆ†ä¸ªäººç†è§£. è‹¥æ‚¨å‘ç°æœ‰æ˜æ˜¾ç†è§£æœ‰è¯¯çš„åœ°æ–¹, åŠç–æ¼ä¹‹å¤„, éº»çƒ¦ç•™è¨€æŒ‡æ­£, åœ¨ä¸‹ä¸èƒœæ„Ÿæ¿€.</p>
<blockquote>
<p>æ ‡é¢˜çš„è§£è¯»: è®¾è®¡æ¨¡å¼ä¸é‡æ„å·ç§°è½¯å·¥åŒé›„, åœ¨è½¯ä»¶å·¥ç¨‹é¢†åŸŸå¯è°“æ™ºæ…§çš„ç»“æ™¶, å°¤å…¶æ˜¯è®¾è®¡æ¨¡å¼, ç”±äºå…¶é«˜åº¦æŠ½è±¡ä¸æœ€ä½³å®è·µçš„ç‰¹æ€§, å¯¼è‡´åˆå­¦è€…ä»¥åŠç¼–ç¨‹ç»éªŒä¸è¶³è€…, è¯»æ­¤å¦‚è¯»å¤©ä¹¦. æ‰€è°“â€ç»™äººè¯»çš„â€, å°±æ˜¯å°†è®¾è®¡æ¨¡å¼è¯·ä¸‹ç¥å›, ç”¨æ›´å®¹æ˜“ç†è§£çš„è§’åº¦æ¥ä»‹ç»å…¶ç²¾é«“. æœ¬äººå¤§å­¦æ—¶æœŸæ›¾è¯»è¿‡ä¸€æœ¬&lt;å¤§è¯è®¾è®¡æ¨¡å¼&gt;, å°±èµ°çš„é€šä¿—æ˜“æ‡‚ä¹‹è·¯, ç„¶è€Œ, é€šä¿—ä¸èƒ½æœ‰å¤±å‡†ç¡®, æ˜“æ‡‚ä¸èƒ½ç†è§£åå·®. å·®ä¹‹æ¯«å˜, è°¬ä»¥åƒé‡Œ. é—»è€…è¶³æˆ’.</p>
<p>Explain them in the simplest way possible. â€” ä½œè€…çš„è¯</p>
</blockquote>
<h2 id="ğŸš€-åˆçª¥é—¨å¾„"><a href="#ğŸš€-åˆçª¥é—¨å¾„" class="headerlink" title="ğŸš€ åˆçª¥é—¨å¾„"></a>ğŸš€ åˆçª¥é—¨å¾„</h2><p>è½¯å·¥çš„æ±Ÿæ¹–, æœ‰ä¸€ä¸ªåŸåˆ™è´¯ç©¿å§‹ç»ˆ, æœ‰å¦‚å‰‘é“: DRY(donâ€™t repeat yourself). æ— æ•°å…ˆå“²ä»¬, æƒ³å°½å„ç§åŠæ³•æ¥è§£å†³è¿™ä¸ªç»ˆæé—®é¢˜. æ‰€è°“è®¾è®¡æ¨¡å¼, å°±æ˜¯å…¶ä¸­æœ€è‘—åçš„ä¸€ä¸ªè§£å†³æ–¹æ¡ˆ, å…¶ä½œè€…æœ‰å››ä½, <del>å·ç§°â€ä¸œé‚ª, è¥¿æ¯’â€¦â€</del>. è€Œè¿™ç§åŠæ³•, æ—©å·²ä¸æ˜¯ä¸€æ‹›ä¸€å¼, ä¸æ˜¯ä»€ä¹ˆç‰¹å®šçš„ç±», åº“, ä»£ç , ä½ æ²¡æ³• include, import ä¸€ä¸‹å°±åäº«å…¶æˆ. è¿™äº›æ–¹æ³•è¢«ç§°ä¹‹ä¸º guidelines, å¦‚æœç›´è¯‘çš„è¯, å°±æ˜¯æŒ‡å¯¼æ–¹é’ˆ. å¬èµ·æ¥æ¯”è¾ƒè™šä¸€ç‚¹, ä½†å®ƒä»¬çš„ç¡®æ˜¯é’ˆå¯¹å…·ä½“é—®é¢˜çš„.</p>
<p>è¿™é‡Œå¼•å…¥ Wikipedia çš„æè¿°:</p>
<blockquote>
<p>In software engineering, a software design pattern is a general reusable solution to a commonly occurring problem within a given context in software design. It is not a finished design that can be transformed directly into source or machine code. It is a description or template for how to solve a problem that can be used in many different situations.</p>
</blockquote>
<p>è¿™å¯èƒ½è¯´çš„æ›´åŠ ç²¾ç¡®ä¸€äº›, ä½†æ„æ€å°±æ˜¯ä¸Šè¿°é‚£æ„æ€.</p>
<h3 id="âš ï¸-å°å¿ƒ"><a href="#âš ï¸-å°å¿ƒ" class="headerlink" title="âš ï¸ å°å¿ƒ"></a>âš ï¸ å°å¿ƒ</h3><ul>
<li>è®¾è®¡æ¨¡å¼<strong>ä¸æ˜¯é“¶å¼¹</strong>(åºŸè¯, æ ¹æœ¬æ²¡æœ‰é“¶å¼¹)</li>
<li><strong>ä¸è¦æ•™æ¡, ä¸è¦ä¸­äºŒ, ä¹Ÿä¸è¦å¼ºè¿«ç—‡.</strong> å¦‚æœé™·å…¥ä»¥ä¸Šä¸‰ç§çŠ¶æ€, è¯·ç‰¢è®°: è®¾è®¡æ¨¡å¼æ˜¯ç”¨æ¥è§£å†³é—®é¢˜çš„, è€Œä¸æ˜¯ç”¨æ¥æ‰¾èŒ¬çš„.</li>
<li><strong>å› åœ°åˆ¶å®œ</strong>, å°±æ˜¯å¤©ä½¿, å¦åˆ™, åˆ™æ˜¯é­”é¬¼.</li>
</ul>
<p>åŸä½œè€…ä½¿ç”¨ PHP7 ä½œä¸ºç¤ºä¾‹ä»£ç , è€Œæ°å¥½æœ¬äººå®Œå…¨ä¸ä¼šå®‡å®™æœ€å¥½è¯­è¨€, åªå¥½ç”¨è€åœŸçš„ C++ æ¥é˜è¿°.</p>
<h3 id="è®¾è®¡æ¨¡å¼çš„ç±»å‹"><a href="#è®¾è®¡æ¨¡å¼çš„ç±»å‹" class="headerlink" title="è®¾è®¡æ¨¡å¼çš„ç±»å‹"></a>è®¾è®¡æ¨¡å¼çš„ç±»å‹</h3><ul>
<li><a>åˆ›å»ºå‹</a></li>
<li><a>ç»“æ„å‹</a></li>
<li><a>è¡Œä¸ºå‹</a></li>
</ul>
<h2 id="åˆ›å»ºå‹è®¾è®¡æ¨¡å¼"><a href="#åˆ›å»ºå‹è®¾è®¡æ¨¡å¼" class="headerlink" title="åˆ›å»ºå‹è®¾è®¡æ¨¡å¼"></a>åˆ›å»ºå‹è®¾è®¡æ¨¡å¼</h2><p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>åˆ›å»ºå‹æ¨¡å¼, æ˜¯é’ˆå¯¹å¦‚ä½•<strong>åˆ›å»ºå¯¹è±¡</strong>çš„è§£å†³æ–¹æ¡ˆ</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In software engineering, creational design patterns are design patterns that deal with object creation mechanisms, trying to create objects in a manner suitable to the situation. The basic form of object creation could result in design problems or added complexity to the design. Creational design patterns solve this problem by somehow controlling this object creation.</p>
</blockquote>
<ul>
<li><a>ç®€å•å·¥å‚</a></li>
<li><a>å·¥å‚æ–¹æ³•</a></li>
<li><a>æŠ½è±¡å·¥å‚</a></li>
<li><a>ç”Ÿæˆå™¨</a></li>
<li><a>åŸå‹</a></li>
<li><a>å•ä¾‹</a></li>
</ul>
<h3 id="ğŸ -ç®€å•å·¥å‚"><a href="#ğŸ -ç®€å•å·¥å‚" class="headerlink" title="ğŸ  ç®€å•å·¥å‚"></a>ğŸ  ç®€å•å·¥å‚</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>é€ æˆ¿å­æ—¶éœ€è¦ä¸€ä¸ªé—¨. ä½ æ˜¯ç©¿ä¸Šæœ¨åŒ æœå¼€å§‹åœ¨ä½ å®¶é—¨å£é”¯æœ¨å¤´, æå¾—ä¸€å›¢ç³Ÿ; è¿˜æ˜¯ä»å·¥å‚é‡Œç”Ÿäº§ä¸€ä¸ª.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>ç®€å•å·¥å‚ä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªå®ä¾‹, è€Œéšè—äº†å…·ä½“çš„å®ä¾‹åŒ–é€»è¾‘.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In object-oriented programming (OOP), a factory is an object for creating other objects â€“ formally a factory is a function or method that returns objects of a varying prototype or class from some method call, which is assumed to be â€œnewâ€.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class IDoor &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual float GetWidth() = 0;</span><br><span class="line">    virtual float GetHeight() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class WoodenDoor : public IDoor &#123;</span><br><span class="line">public:</span><br><span class="line">    WoodenDoor(float width, float height): m_width(width), m_height(height)&#123;&#125;</span><br><span class="line">    float GetWidth() override &#123; return m_width; &#125;</span><br><span class="line">    float GetHeight() override &#123; return m_height; &#125;</span><br><span class="line"></span><br><span class="line">protected:</span><br><span class="line">    float m_width;</span><br><span class="line">    float m_height;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class DoorFactory &#123;</span><br><span class="line">public:</span><br><span class="line">    static IDoor* MakeDoor(float width, float heigh)</span><br><span class="line">    &#123;</span><br><span class="line">        return new WoodenDoor(width, heigh);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    IDoor* door = DoorFactory::MakeDoor(100, 200);</span><br><span class="line">    std::cout &lt;&lt; &quot;Width: &quot; &lt;&lt; door-&gt;GetWidth() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; &quot;Height: &quot; &lt;&lt; door-&gt;GetHeight() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨æ—¶æœº</strong>:</p>
<p>å½“ä½ åˆ›å»ºä¸€ä¸ªå¯¹è±¡, å¹¶éç®€å•æ‹·è´èµ‹å€¼, ç‰µæ‰¯å¾ˆå¤šå…¶ä»–é€»è¾‘æ—¶, å°±åº”è¯¥æŠŠå®ƒæ”¾åˆ°ä¸€ä¸ªä¸“é—¨çš„å·¥å‚ä¸­, è€Œä¸æ˜¯æ¯æ¬¡éƒ½é‡å¤. è¿™ä¸ªä½“ç°åœ¨ C++ ä¸­, ä¸»è¦å°±æ˜¯å°† new è¯­å¥çš„é€»è¾‘æŠ½è±¡åˆ°ä¸€ä¸ªå•ä¾‹, æˆ–è€…å¦‚ä¸Šè¿°ä¾‹å­ä¸€æ ·, æ‰”åˆ°ä¸€ä¸ªç»Ÿä¸€çš„é™æ€å‡½æ•°ä¸­å».</p>
<p><strong>æœ¬è´¨</strong>:</p>
<p>å…¶å®å°±æ˜¯â€æŠ½è±¡â€åœ¨<strong>åˆ›å»ºå¯¹è±¡</strong>æ—¶çš„ä¸€ä¸ªå…·ä½“ä½“ç°.</p>
<h3 id="ğŸ­-å·¥å‚æ–¹æ³•"><a href="#ğŸ­-å·¥å‚æ–¹æ³•" class="headerlink" title="ğŸ­ å·¥å‚æ–¹æ³•"></a>ğŸ­ å·¥å‚æ–¹æ³•</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å¦‚æœä½ ä¸»ç®¡æ‹›è˜, ä½ è‚¯å®šæ— æ³•åšåˆ°ä»€ä¹ˆèŒä½éƒ½ç”±ä½ ä¸€ä¸ªäººæ¥é¢è¯•. æ ¹æ®å…·ä½“çš„å·¥ä½œæ€§è´¨, ä½ éœ€è¦é€‰æ‹©å¹¶å§”æ‰˜ä¸åŒçš„äººæ¥æŒ‰æ­¥éª¤è¿›è¡Œé¢è¯•.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>ä¸€ç§å°†å®ä¾‹åŒ–é€»è¾‘å§”æ‰˜ç»™<strong>å­ç±»</strong>çš„æ–¹æ³•</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In class-based programming, the factory method pattern is a creational pattern that uses factory methods to deal with the problem of creating objects without having to specify the exact class of the object that will be created. This is done by creating objects by calling a factory methodâ€”either specified in an interface and implemented by child classes, or implemented in a base class and optionally overridden by derived classesâ€”rather than by calling a constructor.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class IInterviewer</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void askQuestions() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Developer : public IInterviewer</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void askQuestions() override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;Asking about design patterns!&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class CommunityExecutive : public IInterviewer</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void askQuestions() override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;Asking about community building!&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class HiringManager</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void takeInterview() &#123;</span><br><span class="line">        IInterviewer* interviewer = this-&gt;makeInterviewer();</span><br><span class="line">        interviewer-&gt;askQuestions();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">protected:</span><br><span class="line">    virtual IInterviewer* makeInterviewer() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">template &lt;typename Interviewer&gt;</span><br><span class="line">class OtherManager : public HiringManager &#123;</span><br><span class="line">protected:</span><br><span class="line">    IInterviewer* makeInterviewer() override &#123;</span><br><span class="line">        return new Interviewer();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    HiringManager* devManager = new OtherManager&lt;Developer&gt;();</span><br><span class="line">    devManager-&gt;takeInterview();</span><br><span class="line"></span><br><span class="line">    HiringManager* marketingManager = new OtherManager&lt;CommunityExecutive&gt;();</span><br><span class="line">    marketingManager-&gt;takeInterview();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨æ—¶æœº</strong>:</p>
<p>å½“ä¸€ä¸ªç±»ä¸­æœ‰ä¸€äº›é€šç”¨çš„å¤„ç†, ä½†è¦ç­‰åˆ°è¿è¡Œæ—¶å†³å®šç”¨å“ªä¸ªå­ç±»çš„å®ç°. æ¢å¥è¯è¯´, å½“å®¢æˆ·å¹¶ä¸çŸ¥é“ä»–éœ€è¦å“ªä¸€ä¸ªå­ç±»æ—¶.</p>
<p><strong>è§£é‡Š</strong>:</p>
<ul>
<li>å®¢æˆ·å¹¶ä¸çŸ¥é“ä»–éœ€è¦å“ªä¸€ä¸ªå­ç±»? ä»–åˆ†æ˜æŒ‡å®šäº†å§”æ‰˜äºº: å¼€å‘éƒ¨ä¸»ç®¡å’Œå¸‚åœºéƒ¨ä¸»ç®¡!</li>
</ul>
<p>è¦æ³¨æ„, è¿™é‡Œæˆ‘ä»¬æŠ½è±¡çš„å¯¹è±¡æ˜¯é¢è¯•è¿™ä¸ªè¿‡ç¨‹, ä½œä¸ºç”¨æˆ·, å®ƒåªçŸ¥é“ Interview è¿™ä¸ªæ¥å£, è€Œä¸æ¸…æ¥šè¿™ä¸ª Interview çš„æ´¾ç”Ÿå…³ç³». ä¹Ÿå°±æ˜¯è¯´ä½œä¸ºæ‹›è˜ä¸»ç®¡(ç”¨æˆ·), ä»–åªæ˜¯æ‰¾æ¥äº†å¼€å‘ä¸»ç®¡, å¸‚åœºä¸»ç®¡. ç„¶åä»–è¯´:â€é¢è¯•ä¸€ä¸‹â€. ä»–å¹¶ä¸çŸ¥é“ä¼šé¢è¯•äº›ä»€ä¹ˆå†…å®¹, ä»€ä¹ˆå½¢å¼. è¿™äº›å°±æ˜¯è¢«å°è£…çš„éƒ¨åˆ†. è¿™å°±æ˜¯ä¸Šè¿°â€ä¸çŸ¥é“éœ€è¦å“ªä¸€ä¸ªå­ç±»â€çš„å…·ä½“è§£é‡Š.</p>
<ul>
<li>è¿™å’Œç®€å•å·¥å‚æœ‰å•¥åŒºåˆ«?</li>
</ul>
<p>å¹³å¿ƒè€Œè®º, è¿™ç¯‡æ–‡ç« é‡Œ, ç®€å•å·¥å‚çš„ä¾‹å­å¹¶ä¸æ°å½“, è€Œç®€å•å·¥å‚å’Œå·¥å‚æ–¹æ³•å±…ç„¶ç”¨äº†ä¸¤ä¸ªå®ä¾‹, çœŸæ˜¯æ‰°ä¹±è§†å¬, è®©äººç³Šæ¶‚. ä½†å³ä¾¿å¦‚æ­¤, è¿˜æ˜¯å¯ä»¥çœ‹å‡º, ä¸¤è€…æœ€å¤§çš„åŒºåˆ«: æŠ½è±¡çš„ç»´åº¦. ç®€å•å·¥å‚çš„æŠ½è±¡, æ˜¯ä¸€ç»´çš„, å®ƒæŠ½è±¡çš„ä»…ä»…æ˜¯æ‰€åˆ›å»ºâ€<strong>ç±»å‹</strong>â€œçš„æ¥å£; è€Œå·¥å‚æ–¹æ³•çš„æŠ½è±¡, æ˜¯äºŒç»´çš„, å®ƒä¸ä»…æŠ½è±¡äº†æ‰€åˆ›å»ºâ€ç±»å‹â€çš„æ¥å£, è€Œä¸”æŠ½è±¡äº†â€<strong>æ–¹æ³•</strong>â€œçš„æ¥å£.</p>
<p>å…·ä½“åˆ°ä¾‹å­é‡Œ, ç®€å•å·¥å‚å®ä¾‹ä¸­, å®¢æˆ·å°±æ˜¯è¦ä¸€ä¸ªé—¨, è€Œä¸å…³å¿ƒåˆ›å»ºè¿‡ç¨‹, æœ€åå®é™…åˆ›é€ çš„æ˜¯ä¸€ä¸ªæœ¨é—¨. è¿™ä¸ªé¢‡ä¸ºè®½åˆº, å¦‚æœå®¢æˆ·è¦çš„æ˜¯ä¸ªé“é—¨å‘¢? é‚£å°±äº‹ä¸æ„¿è¿äº†. æ‰€ä»¥åœ¨è¿™ä¸ªä¾‹å­é‡Œ, ä¹Ÿæ˜¯å­˜åœ¨ä¸¤ç»´æŠ½è±¡çš„.ä¸€æ˜¯â€é—¨â€è¿™ä¸ªç±»å‹çš„æŠ½è±¡, äºŒæ˜¯â€é€ é—¨â€è¿™ä¸ªæ–¹æ³•çš„æŠ½è±¡. ç®€å•å·¥å‚åªåšåˆ°äº†å‰è€…, è€Œæ²¡æœ‰ç»™å‡ºåè€…çš„è§£å†³æ–¹æ¡ˆ, è¿™æ‰é€ æˆäº†å®¢æˆ·å¯èƒ½åƒäº†å“‘å·´äº. å¦‚æœæˆ‘ä»¬æŒ‰ç…§å·¥å‚æ–¹æ³•çš„æ€è·¯, å°†é—¨å·¥å‚é€ é—¨è¿™ä»¶äº‹è¿›è¡Œç»†åˆ†, æœ¨é—¨äº¤ç»™æœ¨é—¨å·¥å‚, é“é—¨äº¤ç»™é“é—¨å·¥å‚. è¿™å°±å’Œå·¥å‚æ–¹æ³•é‡Œçš„ä¾‹å­åˆ«æ— äºŒè‡´äº†. å®¢æˆ·éœ€è¦å…ˆæŒ‡å®šå§”æ‰˜å¯¹è±¡, è€Œä¸å…³å¿ƒå…·ä½“æ€ä¹ˆé€ é—¨:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">DoorFactory* woodenDoorFactory = new WoodenDoorFactory();</span><br><span class="line">woodenDoorFactory-&gt;MakeDoor(100, 200);</span><br><span class="line"></span><br><span class="line">DoorFactory* ironDoorFactory = new IronDoorFactory();</span><br><span class="line">ironDoorFactory-&gt;MakeDoor(100, 200);</span><br></pre></td></tr></table></figure>
<p>è¿™å°±æˆäº†å·¥å‚æ–¹æ³•äº†. æ‰€è°“äºŒç»´: â€œDoorFactoryâ€ å’Œ â€œMakeDoorâ€, å‰è€…æ˜¯æ— è®ºå§”æ‰˜ç»™è°, åæ­£å®ƒæ˜¯ä¸€ä¸ªé—¨å·¥å‚; åè€…æ˜¯ç®¡å®ƒé€ ä»€ä¹ˆé—¨, åæ­£å®ƒä¼šç»™æˆ‘é€ å‡ºä¸€ä¸ª 100*200 çš„é—¨æ¥. å®¢æˆ·ä¸å…³å¿ƒç»†èŠ‚, åªå…³å¿ƒç»“æœ. è¿™å°±ä½¿æŠ½è±¡çš„æœ¬è´¨äº†. ç¬¬äºŒä¸ªä¾‹å­ä¹Ÿæ˜¯ä¸€æ ·, â€œInterviewâ€ å’Œ â€œHiringManagerâ€ æ˜¯ä¸¤ç»´æŠ½è±¡, å®¢æˆ·è¦çš„æ˜¯å®Œæˆé¢è¯•è¿‡ç¨‹, è¦çš„å°±æ˜¯ä¸€ä¸ªé¢è¯•å®˜. è‡³äºæ‰¾äº†è°æ¥å……å½“é¢è¯•å®˜, è¿›è¡Œçš„æ˜¯ä»€ä¹ˆæ–¹é¢çš„é¢è¯•. æœ€ç»ˆéƒ½æ˜¯çœ‹ä¸åˆ°çš„. æœ€åæŠ½è±¡æˆçš„ç»“æœå°±æ˜¯: â€œé¢è¯•å®˜å®Œæˆäº†é¢è¯•â€è¿™ä¹ˆä»¶äº‹.</p>
<h3 id="ğŸ”¨-æŠ½è±¡å·¥å‚"><a href="#ğŸ”¨-æŠ½è±¡å·¥å‚" class="headerlink" title="ğŸ”¨ æŠ½è±¡å·¥å‚"></a>ğŸ”¨ æŠ½è±¡å·¥å‚</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>æ¥ç€ç®€å•å·¥å‚é‡Œçš„æ¡ˆä¾‹. æ ¹æ®å®é™…éœ€è¦, æ‚¨å¯ä»¥ä»æœ¨é—¨å•†åº—è·å¾—æœ¨é—¨, ä»é“é—¨å•†åº—è·å¾—é“é—¨, ä»ç›¸å…³å•†åº—è·å¾— PVC é—¨. é™¤æ­¤ä¹‹å¤–, ä½ è¿˜éœ€è¦ä¸åŒä¸“ä¸šçš„äºº, æ¥å¸®ä½ è£…é—¨, æœ¨é—¨éœ€è¦æœ¨åŒ , é“é—¨éœ€è¦ç„Šå·¥. å¯ä»¥çœ‹åˆ°, é—¨ä¹‹é—´å­˜åœ¨ç€ä¸€å®šçš„å¯¹åº”ä¾èµ–å…³ç³». æœ¨é—¨-æœ¨åŒ , é“é—¨-ç„Šå·¥, ç­‰ç­‰.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å·¥å‚ä»¬çš„å·¥å‚, ä¸€å®¶ç®¡ç†å„è‡ªç‹¬ç«‹å´åˆäº’ç›¸ä¾èµ–çš„ä¸€æ‰¹å·¥å‚, è€Œä¸å…³å¿ƒå„è‡ªçš„ç»†èŠ‚.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>The abstract factory pattern provides a way to encapsulate a group of individual factories that have a common theme without specifying their concrete classes</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class IDoor &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void GetDescription() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class WoodenDoor : public IDoor &#123;</span><br><span class="line">public:</span><br><span class="line">    void GetDescription() override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;I am a wooden door&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class IronDoor : public IDoor &#123;</span><br><span class="line">public:</span><br><span class="line">    void GetDescription() override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;I am a iron door&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class IDoorFittingExpert &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void GetDescription() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Carpenter : public IDoorFittingExpert &#123;</span><br><span class="line">    void GetDescription() override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;I can only fit wooden doors&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Welder : public IDoorFittingExpert &#123;</span><br><span class="line">    void GetDescription() override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;I can only fit iron doors&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class IDoorFactory &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual IDoor* MakeDoor() = 0;</span><br><span class="line">    virtual IDoorFittingExpert* MakeFittingExpert() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">template &lt;typename Door, typename DoorFittingExpert&gt;</span><br><span class="line">class DoorFactory : public IDoorFactory &#123;</span><br><span class="line">public:</span><br><span class="line">    IDoor* MakeDoor() override &#123;</span><br><span class="line">        return new Door();</span><br><span class="line">    &#125;</span><br><span class="line">    IDoorFittingExpert* MakeFittingExpert() override &#123;</span><br><span class="line">        return new DoorFittingExpert();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    IDoorFactory* woodenFactory = new DoorFactory&lt;WoodenDoor, Carpenter&gt;();</span><br><span class="line">    &#123;</span><br><span class="line">        IDoor* door = woodenFactory-&gt;MakeDoor();</span><br><span class="line">        IDoorFittingExpert* expert = woodenFactory-&gt;MakeFittingExpert();</span><br><span class="line">        door-&gt;GetDescription();</span><br><span class="line">        expert-&gt;GetDescription();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    IDoorFactory* ironFactory = new DoorFactory&lt;IronDoor, Welder&gt;();</span><br><span class="line">    &#123;</span><br><span class="line">        IDoor* door = ironFactory-&gt;MakeDoor();</span><br><span class="line">        IDoorFittingExpert* expert = ironFactory-&gt;MakeFittingExpert();</span><br><span class="line">        door-&gt;GetDescription();</span><br><span class="line">        expert-&gt;GetDescription();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>ä½¿ç”¨æ—¶æœº</strong>:</p>
<p>å½“é‡åˆ°ä¸é‚£ä¹ˆç®€å•çš„åˆ›å»ºé€»è¾‘, ä¼´éšç€ä¸ä¹‹ç›¸å…³çš„ä¾èµ–å…³ç³»æ—¶.</p>
<p><strong>æœ¬è´¨</strong>:</p>
<p>ä¾ç„¶å¯ä»¥ç”¨ç»´åº¦æ¥ç†è§£æŠ½è±¡å·¥å‚. æŠ½è±¡å·¥å‚æ¯”å·¥å‚æ–¹æ³•åˆå¤šäº†ä¸€ç»´. æˆ‘ä»¬å†æŠŠä¸‰ä¸ªå·¥å‚ç†ä¸€é: ç®€å•å·¥å‚, æ˜¯é’ˆå¯¹ä¸€ç§â€ç±»å‹â€çš„æŠ½è±¡; å·¥å‚æ–¹æ³•, æ˜¯é’ˆå¯¹ä¸€ç§â€ç±»å‹â€, ä»¥åŠä¸€ç§â€åˆ›å»ºæ–¹æ³•â€çš„æŠ½è±¡; æŠ½è±¡å·¥å‚, æ˜¯é’ˆå¯¹<strong>ä¸€ç»„</strong>â€œç±»å‹â€ä¸â€åˆ›å»ºæ–¹æ³•â€çš„æŠ½è±¡, ç»„å†…æ¯ä¸€å¥—ç±»å‹ä¸åˆ›å»ºæ–¹æ³•ä¸€ä¸€å¯¹åº”. ç”¨é€ é—¨è¿™ä¸ªä¾‹å­æ¥è¯´: ç®€å•å·¥å‚, æ˜¯å°è£…äº†â€é€ é—¨â€çš„æ“ä½œ, è¾“å‡ºçš„æ˜¯ä¸€ç§é—¨; å·¥å‚æ–¹æ³•, æ˜¯å°è£…äº†â€å¤šç§é€ é—¨â€çš„æ“ä½œ, å¹¶å§”æ‰˜â€å¤šå®¶å·¥å‚â€, è¾“å‡ºçš„æ˜¯â€å„ç§é—¨â€. æŠ½è±¡å·¥å‚, æ˜¯å°è£…äº†â€å¤šç§é€ é—¨â€çš„æ“ä½œ, â€œæä¾›å¤šç§ä¸“ä¸šäººå‘˜â€çš„æ“ä½œ, å¹¶å§”æ‰˜ç»™â€å¤šå®¶å·¥å‚â€, è¾“å‡ºçš„æ˜¯â€å„ç§é—¨â€, ä»¥åŠâ€å„ç§ä¸“ä¸šäººå‘˜â€, ä¸”â€é—¨â€ä¸â€ä¸“ä¸šäººå‘˜â€ä¸€ä¸€å¯¹åº”.</p>
<p>ä¾‹å­ä¸­, æŠ½è±¡å·¥å‚æä¾›äº†ä¸¤å¥—â€ç±»å‹ - åˆ›å»ºæ“ä½œâ€(åˆ†åˆ«æ˜¯â€é—¨ - é€ é—¨â€, â€œä¸“ä¸šäººå‘˜ - æä¾›ä¸“ä¸šäººå‘˜â€), å…¶å®è¿™ä¸ªä¸ªæ•°æ˜¯æ— é™çš„. ä½ å¯ä»¥æä¾› n å¥—è¿™æ ·çš„å¯¹åº”å…³ç³». ç„¶åå§”æ‰˜ç»™ç›¸å…³çš„å·¥å‚. è¿™å°±æ˜¯â€å·¥å‚ä»¬çš„å·¥å‚â€çš„å…·ä½“å«ä¹‰.</p>
<h3 id="ğŸ‘·-ç”Ÿæˆå™¨"><a href="#ğŸ‘·-ç”Ÿæˆå™¨" class="headerlink" title="ğŸ‘· ç”Ÿæˆå™¨"></a>ğŸ‘· ç”Ÿæˆå™¨</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å‡è®¾ä½ åœ¨å“ˆè¿ªæ–¯(ç¾å›½è¿é”å¿«é¤é›†å›¢), æ­£æƒ³ä¸‹å•. å¦‚æœä½ è¯´, è¦ä¸€ä¸ª â€œå¤§å“ˆè¿ªâ€, ä»–ä»¬å¾ˆå¿«å°±èƒ½äº¤ç»™ä½ , è€Œä¸å¤šé—®ä¸€å¥. è¿™æ˜¯ç®€å•å·¥å‚çš„ä¾‹å­. ä½†, å½“åˆ›å»ºé€»è¾‘æ¶‰åŠæ›´å¤šæ­¥éª¤æ—¶, è­¬å¦‚, ä½ åœ¨ Subway ä¹°æ±‰å ¡, é‚£ä¹ˆä½ å¯èƒ½éœ€è¦åšå‡ºæ›´å¤šé€‰æ‹©, æƒ³è¦å“ªç§é¢åŒ…? å“ªç§é…±æ±? å“ªç§å¥¶é…ª? è¿™ç§æƒ…å†µä¸‹, å°±éœ€è¦ç”¨åˆ°ç”Ÿæˆå™¨æ¨¡å¼äº†.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å…è®¸ä½ åˆ›å»ºä¸åŒé£æ ¼çš„å¯¹è±¡, åŒæ—¶é¿å…æ„é€ å™¨æ±¡æŸ“. å½“å¯¹è±¡æœ‰å¥½å‡ ç§å£å‘³çš„æ—¶å€™å°¤å…¶æœ‰ç”¨. æˆ–è€…æ˜¯åˆ›å»ºå¯¹è±¡çš„è¿‡ç¨‹æ¶‰åŠå¾ˆå¤šæ­¥éª¤æ—¶.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>The builder pattern is an object creation software design pattern with the intentions of finding a solution to the telescoping constructor anti-pattern.</p>
</blockquote>
<p>ç®€å•è¯´ä¸‹â€the telescoping constructor anti-patternâ€(å¯ä¼¸ç¼©æ„é€ å™¨çš„åæ¨¡å¼)æ˜¯ä»€ä¹ˆ. ä½ æ€»ä¼šçœ‹åˆ°ä¸‹é¢è¿™ç§æ„é€ å‡½æ•°:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Burger(int size, bool cheese = true, bool peperoni = true, bool tomato = false, bool lettuce = true);</span><br></pre></td></tr></table></figure>
<p>ä½ åº”è¯¥å·²ç»å¯Ÿè§‰äº†, æ„é€ å‡½æ•°çš„å‚æ•°æ•°é‡å¯èƒ½ä¼šè¿…é€Ÿå¤±æ§, è€Œä¸”å…¶å‚æ•°å®‰æ’ä¼šè¶Šæ¥è¶Šéš¾ç†è§£. å°†æ¥æƒ³è¦å¢åŠ æ›´å¤šé€‰é¡¹, è¿™ä¸ªåˆ—è¡¨ä¼šä¸€ç›´å¢é•¿ä¸‹å». è¿™å°±è¢«ç§°ä¸ºâ€the telescoping constructor anti-patternâ€(å¯ä¼¸ç¼©æ„é€ å™¨çš„åæ¨¡å¼).</p>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class Burger &#123;</span><br><span class="line">public:</span><br><span class="line">    class BurgerBuilder;</span><br><span class="line">    void showFlavors() &#123;</span><br><span class="line">        std::cout &lt;&lt; size_;</span><br><span class="line">        if (cheese_) std::cout &lt;&lt; &quot;-cheese&quot;;</span><br><span class="line">        if (peperoni_) std::cout &lt;&lt; &quot;-peperoni&quot;;</span><br><span class="line">        if (lettuce_) std::cout &lt;&lt; &quot;-lettuce&quot;;</span><br><span class="line">        if (tomato_) std::cout &lt;&lt; &quot;-tomato&quot;;</span><br><span class="line">        std::cout &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    Burger(int size): size_(size) &#123;&#125;</span><br><span class="line"></span><br><span class="line">    int size_ = 7;</span><br><span class="line">    bool cheese_ = false;</span><br><span class="line">    bool peperoni_ = false;</span><br><span class="line">    bool lettuce_ = false;</span><br><span class="line">    bool tomato_ = false;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Burger::BurgerBuilder &#123;</span><br><span class="line">public:</span><br><span class="line">    BurgerBuilder(int size) &#123; burger_ = new Burger(size); &#125;</span><br><span class="line">    BurgerBuilder&amp; AddCheese() &#123; burger_-&gt;cheese_ = true; return *this; &#125;</span><br><span class="line">    BurgerBuilder&amp; AddPepperoni() &#123; burger_-&gt;peperoni_ = true; return *this; &#125;</span><br><span class="line">    BurgerBuilder&amp; AddLettuce() &#123; burger_-&gt;lettuce_ = true; return *this; &#125;</span><br><span class="line">    BurgerBuilder&amp; AddTomato() &#123; burger_-&gt;tomato_ = true; return *this; &#125;</span><br><span class="line">    Burger* Build() &#123; return burger_; &#125;</span><br><span class="line">private:</span><br><span class="line">    Burger* burger_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Burger* burger = Burger::BurgerBuilder(14).AddPepperoni().AddLettuce().AddTomato().Build();</span><br><span class="line">    burger-&gt;showFlavors();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç ä¸åŸæ–‡ä»£ç ç•¥æœ‰ä¸åŒ, ä½†è¡¨è¾¾çš„ä¸»æ—¨, ä»¥åŠæœ€ç»ˆç”¨æ³•å®Œå…¨ä¸€è‡´. (é¢å¤–æ·»åŠ äº†è¾“å‡ºå‡½æ•°, æ–¹ä¾¿è¿è¡ŒæŸ¥çœ‹)</p>
<p><strong>ä½¿ç”¨æ—¶æœº</strong>:</p>
<p>å½“å¯¹è±¡æ‹¥æœ‰å¥½å‡ ç§å£å‘³, ä¸”éœ€è¦é¿å…æ„é€ å™¨ä¼¸ç¼©æ—¶ä½¿ç”¨. ä¸å·¥å‚æ¨¡å¼è¿ç”¨åœºæ™¯ä¸åŒä¹‹å¤„åœ¨äº: å½“åˆ›å»ºè¿‡ç¨‹ä»…ä»…ä¸€æ­¥åˆ°ä½, ä½¿ç”¨å·¥å‚æ¨¡å¼. å¦‚æœéœ€è¦åˆ†æ­¥è¿›è¡Œ, åˆ™è€ƒè™‘ä½¿ç”¨ç”Ÿæˆå™¨æ¨¡å¼.</p>
<p><strong>æœ¬è´¨</strong>:</p>
<p>ç”Ÿæˆå™¨æ¨¡å¼çš„æœ¬è´¨, å°±æ˜¯å°†æ„é€ å‡½æ•°ä¸­çš„å‚æ•°åˆ—è¡¨<strong>æ–¹æ³•åŒ–</strong>. é•¿é•¿çš„å‚æ•°åˆ—è¡¨, æ— è®ºæ˜¯é¢å‘å¯¹è±¡è¿˜æ˜¯å‡½æ•°å¼ç¼–ç¨‹, éƒ½æ˜¯å¤§å¿Œ. è¯¥æ¨¡å¼ä¸»è¦å°±æ˜¯ä¸ºäº†è§£å†³è¯¥é—®é¢˜. å‡½æ•°å¼ç¼–ç¨‹ä¸­å¯¹è¯¥é—®é¢˜çš„è§£å†³æ–¹å¼æ˜¯: <a href="https://zh.wikipedia.org/wiki/%E6%9F%AF%E9%87%8C%E5%8C%96" target="_blank" rel="noopener">æŸ¯é‡ŒåŒ–</a>, å…¶æœ¬è´¨ä¸ç”Ÿæˆå™¨æ¨¡å¼æ˜¯ä¸€æ ·çš„.</p>
<h3 id="ğŸ‘-åŸå‹"><a href="#ğŸ‘-åŸå‹" class="headerlink" title="ğŸ‘ åŸå‹"></a>ğŸ‘ åŸå‹</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>è¿˜è®°å¾—å¤šåˆ©å—? è¿™ä¸ªå±±ç¾Šæ˜¯å…‹éš†çš„! å…ˆä¸è°ˆç»†èŠ‚, å…³é”®ç‚¹éƒ½é›†ä¸­åœ¨äºå…‹éš†ä¸Š.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>é€šè¿‡å…‹éš†, åŸºäºå·²æœ‰å¯¹è±¡æ¥åˆ›å»ºå¯¹è±¡.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>The prototype pattern is a creational design pattern in software development. It is used when the type of objects to create is determined by a prototypical instance, which is cloned to produce new objects.</p>
</blockquote>
<p>ç®€è¨€ä¹‹, å®ƒå…è®¸ä½ æ‹·è´ä¸€ä»½å·²æœ‰å¯¹è±¡, å¹¶æ ¹æ®éœ€æ±‚æ”¹é€ ä¹‹. ä»è€Œçœå»äº†è‰åˆ›çš„è¿‡ç¨‹.</p>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">class Sheep &#123;</span><br><span class="line">public:</span><br><span class="line">    Sheep(const std::string&amp; name, const std::string&amp; category = &quot;Mountain Sheep&quot;) : name_(name), category_(category) &#123;&#125;</span><br><span class="line">    void SetName(const std::string&amp; name) &#123; name_ = name; &#125;</span><br><span class="line">    void ShowInfo() &#123; std::cout &lt;&lt; name_ &lt;&lt; &quot; : &quot; &lt;&lt; category_ &lt;&lt; std::endl; &#125;</span><br><span class="line">private:</span><br><span class="line">    std::string name_;</span><br><span class="line">    std::string category_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Sheep jolly(&quot;Jolly&quot;);</span><br><span class="line">    jolly.ShowInfo();</span><br><span class="line"></span><br><span class="line">    Sheep dolly(jolly); // copy constructor</span><br><span class="line">    dolly.SetName(&quot;Dolly&quot;);</span><br><span class="line">    dolly.ShowInfo();</span><br><span class="line"></span><br><span class="line">    Sheep doolly = jolly; // copy assignment</span><br><span class="line">    doolly.SetName(&quot;Doolly&quot;);</span><br><span class="line">    doolly.ShowInfo();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šè¿°ä»£ç , åˆ©ç”¨çš„æ˜¯ <code>Sheep</code> é»˜è®¤çš„æ‹·è´æ„é€ å’Œæ‹·è´èµ‹å€¼å‡½æ•°, å½“ç„¶ä¹Ÿå¯ä¹Ÿé‡å†™è¿™ä¸¤ä¸ªå‡½æ•°å®ç°è‡ªå®šä¹‰æ“ä½œ.</p>
<p><strong>ä½¿ç”¨æ—¶æœº</strong>:</p>
<p>å½“éœ€è¦çš„å¯¹è±¡, ä¸å·²å­˜åœ¨çš„å¯¹è±¡éå¸¸ç›¸ä¼¼, æˆ–å½“åˆ›å»ºè¿‡ç¨‹æ¯”å…‹éš†ä¸€ä¸‹æ›´è´¹æ—¶çš„æ—¶å€™.</p>
<p><strong>æœ¬è´¨</strong>:</p>
<p>åŸå‹æ¨¡å‹, åŸºæœ¬å·²ç»åµŒå…¥åœ¨å„ç§è¯­è¨€å®ç°é‡Œäº†. å…¶æ ¸å¿ƒå°±æ˜¯ Copy. å…¶å®è¿™ä¸ªç­–ç•¥ä¸å±€é™äºä»£ç æ¶æ„, å½“ä½ é‡è£…å®Œæ“ä½œç³»ç»Ÿ, å¹¶å®‰è£…äº†å¿…å¤‡è½¯ä»¶, ä¸€èˆ¬ä¼šæ‰“åŒ…ä¸€ä»½ ghost, ä¸‹æ¬¡ç»™åˆ«äººé‡è£…çš„æ—¶å€™, ç›´æ¥ä¸€é”® ghost å³å¯, å¦‚æœ‰ç‰¹æ®Šéœ€è¦, å¯ä»¥è£…å¥½åå†è°ƒæ•´. è¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šä¹Ÿæ˜¯åŸå‹æ¨¡å¼. å†æ¯”å¦‚, æˆ‘ä»¬å¼€å‘æ—¶æ€»ä¼šå…ˆæ­å»ºç¯å¢ƒ(è„šæ‰‹æ¶), ç°åœ¨å¯ä»¥ç”¨ docker æ¥æ­å»ºäº†, é‚£ä¹ˆä½ ç”¨åˆ«äººçš„ docker åŒ…æ¥æ­å»ºæ—¶, å…¶å®ä¹Ÿæ—¶åŸå‹æ¨¡å¼. è¿™æ ·ç†è§£, å°±æ¯”è¾ƒé€šä¿—äº†.</p>
<h3 id="ğŸ’-å•ä¾‹"><a href="#ğŸ’-å•ä¾‹" class="headerlink" title="ğŸ’ å•ä¾‹"></a>ğŸ’ å•ä¾‹</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>æ‰€è°“ä¸€å±±ä¸å®¹äºŒè™, ä¸€å›½ä¸å¯ä¸¤å›. é‡åˆ°å¤§äº‹, æ€»åº”è¯¥ç”±åŒä¸€ä½è€å¤§æ¥å¤„ç†. é‚£ä¹ˆè¿™ä½è€å¤§å°±æ˜¯å•ä¾‹.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>ç¡®ä¿ä¸€ä¸ªç‰¹å®šç±»çš„ä¸€ä¸ªå¯¹è±¡, åªèƒ½åˆ›å»ºä¸€æ¬¡.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In software engineering, the singleton pattern is a software design pattern that restricts the instantiation of a class to one object. This is useful when exactly one object is needed to coordinate actions across the system.</p>
</blockquote>
<p>å®é™…ä¸Š, å•åˆ©æ¨¡å¼å¸¸è¢«è®¤ä¸ºæ˜¯åæ¨¡å¼, è¦é¿å…è¿‡åº¦ä½¿ç”¨. å®ƒæœ¬è´¨ä¸Šç±»ä¼¼å…¨å±€å˜é‡, å¯èƒ½ä¼šé€ æˆè€¦åˆåº¦è¿‡é«˜çš„é—®é¢˜, ä¹Ÿå¯èƒ½ç»™è°ƒè¯•å¸¦æ¥å›°éš¾. æ•…è€Œä¸€å®šè¦è°¨æ…ä½¿ç”¨.</p>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<p>åˆ›é€ å•ä¾‹, è¦ç¡®ä¿æ„é€ å‡½æ•°ç§æœ‰åŒ–, æ‹·è´æ„é€ , æ‹·è´èµ‹å€¼åº”è¯¥ç¦ç”¨. åˆ›å»ºä¸€ä¸ªé™æ€å˜é‡æ¥å­˜æ­¤å•ä¾‹.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;cassert&gt;</span><br><span class="line"></span><br><span class="line">class President &#123;</span><br><span class="line">public:</span><br><span class="line">    static President&amp; GetInstance() &#123;</span><br><span class="line">        static President instance;</span><br><span class="line">        return instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    President(const President&amp;) = delete;</span><br><span class="line">    President&amp; operator=(const President&amp;) = delete;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    President() &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    const President&amp; president1 = President::GetInstance();</span><br><span class="line">    const President&amp; president2 = President::GetInstance();</span><br><span class="line"></span><br><span class="line">    assert(&amp;president1 == &amp;president2); // same address, point to same object.</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç»“æ„å‹è®¾è®¡æ¨¡å¼"><a href="#ç»“æ„å‹è®¾è®¡æ¨¡å¼" class="headerlink" title="ç»“æ„å‹è®¾è®¡æ¨¡å¼"></a>ç»“æ„å‹è®¾è®¡æ¨¡å¼</h2><p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>ç»“æ„å‹æ¨¡å¼é‡ç‚¹å…³æ³¨å¯¹è±¡ç»„åˆ, æ¢å¥è¯è¯´, å®ä½“å¦‚ä½•äº’ç›¸è°ƒç”¨. è¿˜æœ‰å¦ä¸€ä¸ªè§£é‡Š: å¯¹â€å¦‚ä½•æ„å»ºä¸€ä¸ªè½¯ä»¶ç»„ä»¶?â€é—®é¢˜çš„å›ç­”.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In software engineering, structural design patterns are design patterns that ease the design by identifying a simple way to realize relationships between entities.</p>
</blockquote>
<ul>
<li><a>é€‚é…å™¨</a></li>
<li><a>æ¡¥æ¥</a></li>
<li><a>ç»„æˆ</a></li>
<li><a>è£…é¥°</a></li>
<li><a>å¤–è§‚</a></li>
<li><a>äº«å…ƒ</a></li>
<li><a>ä»£ç†</a></li>
</ul>
<h3 id="ğŸ”Œ-é€‚é…å™¨"><a href="#ğŸ”Œ-é€‚é…å™¨" class="headerlink" title="ğŸ”Œ é€‚é…å™¨"></a>ğŸ”Œ é€‚é…å™¨</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>ä¸‰ä¸ªä¾‹å­: 1) ä½ ä»ç›¸æœºå­˜å‚¨å¡ä¼ ç…§ç‰‡ç»™ç”µè„‘, éœ€è¦ä¸æ­¤å…¼å®¹çš„é€‚é…å™¨, æ¥ä¿è¯è¿æ¥. 2) ç”µæºé€‚é…å™¨, ä¸‰è„šæ’å¤´è½¬ä¸¤è„šæ’å¤´. 3) ç¿»è¯‘, çœ‹å¥½è±åå¤§ç‰‡, å°†è‹±æ–‡å­—å¹•è½¬ä¸ºä¸­æ–‡.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>é€‚é…å™¨æ¨¡å¼, åŒ…è£…ä¸€ä¸ªå¯¹è±¡, è®©æœ¬ä¸å…¼å®¹å…¶ä»–ç±»çš„è¯¥å¯¹è±¡å˜å¾—å…¼å®¹.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In software engineering, the adapter pattern is a software design pattern that allows the interface of an existing class to be used as another interface. It is often used to make existing classes work with others without modifying their source code.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class ILion &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void Roar() &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;I am a Lion&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Hunter &#123;</span><br><span class="line">public:</span><br><span class="line">    void Hunt(ILion&amp; lion) &#123;</span><br><span class="line">        lion.Roar();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class WildDog</span><br><span class="line">&#123;</span><br><span class="line">public:</span><br><span class="line">    void Bark() &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;I am a wild dog.&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">//! now we added a new class `WildDog`, the hunter can hunt it also.</span><br><span class="line">//! But we cannot do that directly because dog has a different interface.</span><br><span class="line">//! To make it compatible for our hunter, we will have to create an adapter.</span><br><span class="line"></span><br><span class="line">class WildDogAdapter : public ILion &#123;</span><br><span class="line">public:</span><br><span class="line">    WildDogAdapter(WildDog&amp; dog): dog_(dog) &#123;&#125;</span><br><span class="line">    void Roar() override &#123;</span><br><span class="line">        dog_.Bark();</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    WildDog&amp; dog_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    WildDog dog;</span><br><span class="line">    WildDogAdapter dogAdapter(dog);</span><br><span class="line"></span><br><span class="line">    Hunter hunter;</span><br><span class="line">    hunter.Hunt(dogAdapter);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>è½¯å·¥é¢†åŸŸ, å¾ˆå¤šé—®é¢˜éƒ½å¯ä»¥ç”¨<strong>åœ¨ä¸­é—´åŠ ä¸€å±‚</strong>çš„æ–¹å¼æ¥è§£å†³. é€‚é…å™¨æ¨¡å¼, æ˜¯è¿™ç§ç­–ç•¥çš„å…¸å‹åº”ç”¨ä¹‹ä¸€.</p>
<h3 id="ğŸš¡-æ¡¥æ¥"><a href="#ğŸš¡-æ¡¥æ¥" class="headerlink" title="ğŸš¡ æ¡¥æ¥"></a>ğŸš¡ æ¡¥æ¥</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªç½‘ç«™, æœ‰ç€å¾ˆå¤šä¸åŒç§ç±»çš„é¡µé¢. è€Œæ­¤åˆ»ä½ æœ‰ä¸€ä¸ªåŠŸèƒ½æ˜¯å…è®¸ç”¨æˆ·æ¥æ”¹å˜ä¸»é¢˜æ ·å¼. è¯¥æ€ä¹ˆåš? ä¸ºæ¯ä¸ªä¸åŒé¡µé¢éƒ½åˆ›å»ºå¤šä¸ªå‰¯æœ¬? è¿˜æ˜¯åˆ›å»ºå•ç‹¬çš„ä¸»é¢˜, å¹¶æ ¹æ®ç”¨æˆ·åå¥½åŠ è½½å®ƒä»¬? æ¡¥æ¥æ¨¡å¼å…è®¸ä½ å®ç°ç¬¬äºŒç§æ–¹æ¡ˆ.</p>
</blockquote>
<p>ä¸€å›¾èƒœåƒè¨€:</p>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>æ¡¥æ¥æ¨¡å¼, ä¼˜å…ˆè€ƒè™‘ç»„åˆè€Œéç»§æ‰¿. å°†å®ç°ç»†èŠ‚ä»å±‚æ¬¡ç»“æ„ä¸­, å‰¥ç¦»å¹¶ç‹¬ç«‹æˆå¦ä¸€å¥—å±‚æ¬¡ç»“æ„.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>The bridge pattern is a design pattern used in software engineering that is meant to â€œdecouple an abstraction from its implementation so that the two can vary independentlyâ€</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">class ITheme &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual std::string GetColor() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class DarkTheme : public ITheme &#123;</span><br><span class="line">public:</span><br><span class="line">    std::string GetColor() override &#123; return &quot;Dark Black&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class LightTheme : public ITheme &#123;</span><br><span class="line">public:</span><br><span class="line">    std::string GetColor() override &#123; return &quot;Off white&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class AquaTheme : public ITheme &#123;</span><br><span class="line">public:</span><br><span class="line">    std::string GetColor() override &#123; return &quot;Light blue&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class IWebPage &#123;</span><br><span class="line">public:</span><br><span class="line">    IWebPage(ITheme&amp; theme) : theme_(theme) &#123;&#125;</span><br><span class="line">    virtual std::string GetContent() = 0;</span><br><span class="line">protected:</span><br><span class="line">    ITheme&amp; theme_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class About : public IWebPage &#123;</span><br><span class="line">public:</span><br><span class="line">    About(ITheme&amp; theme) : IWebPage(theme) &#123;&#125;</span><br><span class="line">    std::string GetContent() override &#123;</span><br><span class="line">        return &quot;About page in &quot; + theme_.GetColor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Careers : public IWebPage &#123;</span><br><span class="line">public:</span><br><span class="line">    Careers(ITheme&amp; theme) : IWebPage(theme) &#123;&#125;</span><br><span class="line">    std::string GetContent() override &#123;</span><br><span class="line">        return &quot;Careers page in &quot; + theme_.GetColor();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    DarkTheme darkTheme;</span><br><span class="line">    About about(darkTheme);</span><br><span class="line">    Careers careers(darkTheme);</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; about.GetContent() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; careers.GetContent() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>æ¡¥æ¥æ¨¡å¼æœ¬è´¨ä¸Šæ˜¯ä¸€ç§æ‹†åˆ†. è®²é€‚é…å™¨æ¨¡å¼çš„æ—¶å€™, æˆ‘æè¿‡ä¸€å¥è¡Œå†…åè¨€: â€œå¾ˆå¤š(ä»»ä½•)é—®é¢˜éƒ½å¯ä»¥é€šè¿‡åœ¨ä¸­é—´åŠ ä¸€å±‚çš„æ–¹å¼è§£å†³â€. è¿™ä¸ªå¯ä»¥ç†è§£æˆâ€åŠ â€æ“ä½œ. é‚£ä¹ˆæ¡¥æ¥æ¨¡å¼, å®é™…ä¸Šæ˜¯ä¸€ç§â€å‡â€æ“ä½œ. è€Œå¯¹åº”ç€å¦ä¸€å¥è¯: â€œé¢å¯¹æ··ä¹±, éš¾ä»¥ç»´æŠ¤çš„ä»£ç , ç¬¬ä¸€æ­¥è¦åšçš„å°±æ˜¯æ‹†â€. æ€ä¹ˆæ‹†? æ¡¥æ¥æ¨¡å¼è®²ç©¶åœ¨ä¸€ç§å±‚æ¬¡ç»“æ„ä¸­å‰¥ç¦»å‡ºå¦ä¸€å¥—ç‹¬ç«‹çš„å±‚æ¬¡ç»“æ„. è­¬å¦‚è¿™ä¸ªä¾‹å­ä¸­, â€œThemeâ€å°±æ˜¯å‰¥ç¦»å‡ºæ¥çš„æŠ½è±¡æ¦‚å¿µ. ç»ç’ƒä¹‹å‰, é¡µé¢ä¸€å¤§å †, ä½†æ˜¯æœ‰è§„å¾‹: å¾ˆå¤šé¡µé¢, åªæ˜¯æ ·å¼ä¸åŒ, ä½†å†…å®¹ç›¸åŒ. æ€ä¹ˆåš? DRY åŸåˆ™å‘Šè¯‰æˆ‘ä»¬, ç›¸åŒçš„ä¸œè¥¿ä¿ç•™ä¸€ä»½, å°†ä¸åŒçš„ä¸œè¥¿æŠ½è±¡å‡ºæ¥. è¿™ä¹Ÿä¸ â€œé«˜å†…èš, ä½è€¦åˆâ€ è¿™ä¸ªæœ€ç»ˆç›®çš„ä¸€è„‰ç›¸æ‰¿.æŠ½å‡º Theme ä¹‹å, å‰©ä¸‹çš„ Page éƒ¨åˆ†, å†…èšå°±æ¯”è¾ƒé«˜äº†, ä¹Ÿå¯ä»¥ç§°ä¹‹ä¸º: æ›´åŠ çº¯ç²¹äº†, åªè´Ÿè´£é¡µé¢å†…å®¹.</p>
<p>è¿˜è¦æ³¨æ„åˆ°é€‚é…å™¨å’Œæ¡¥æ¥æ¨¡å¼çš„ç›¸åŒç‚¹, å®ƒä»¬éƒ½å­˜åœ¨ä¸€ä¸ªå¼ºè€¦åˆçš„<strong>å…³è”</strong>(UML)å…³ç³». è­¬å¦‚ <code>WildDogAdapter</code> å°±å¿…ç„¶åŒ…å«ä¸€ä¸ª <code>WildDog</code> (<strong>ç»„åˆ</strong>(UML)å…³ç³»). <code>IWebPage</code> å°±å¿…ç„¶åŒ…å«ä¸€ä¸ª <code>ITheme</code>(ä¹Ÿæ˜¯<strong>ç»„åˆ</strong>(UML)å…³ç³»). è€Œä»è¿™ä¸ªè§’åº¦æ¥çœ‹, ä½ å‘ç°æ¡¥æ¥é‡Œ, è¿™ç§å…³ç³»å‘ç”Ÿåœ¨æ¥å£å±‚é¢, è€Œé€‚é…å™¨, åªæ˜¯ç®€å•çš„å‘ç”Ÿåœ¨ä¸¤ä¸ªç±»å±‚é¢. è¿™å°±å¥½æ¯”ç®€å•å·¥å‚ä¸å·¥å‚æ–¹æ³•çš„å…³ç³». æ˜¯ç»´åº¦çš„ä¸Šå‡, è€Œå¤šå‡ºçš„è¿™ä¸ªç»´åº¦, å°±æ˜¯æ¡¥æ¥æ¨¡å¼ä¸­â€å±‚æ¬¡â€çš„ä½“ç°.</p>
<h3 id="ğŸŒ¿-ç»„æˆ"><a href="#ğŸŒ¿-ç»„æˆ" class="headerlink" title="ğŸŒ¿ ç»„æˆ"></a>ğŸŒ¿ ç»„æˆ</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>æ¯ä¸ªå…¬å¸éƒ½æ˜¯ç”±å‘˜å·¥ç»„æˆçš„. æ¯ä¸ªå‘˜å·¥, æœ‰ç›¸åŒç‚¹: å¦‚éƒ½æœ‰è–ªæ°´, éƒ½éœ€è¦è´Ÿè´£, éƒ½å¯èƒ½æœ‰ä¸Šçº§, ä¹Ÿéƒ½å¯èƒ½æœ‰ä¸‹å±.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>ç»„åˆæ¨¡å¼è®©å®¢æˆ·ä»¥ç»Ÿä¸€çš„æ–¹å¼å¯¹å¾…å„ä¸ªç‹¬ç«‹çš„å¯¹è±¡.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In software engineering, the composite pattern is a partitioning design pattern. The composite pattern describes that a group of objects is to be treated in the same way as a single instance of an object. The intent of a composite is to â€œcomposeâ€ objects into tree structures to represent part-whole hierarchies. Implementing the composite pattern lets clients treat individual objects and compositions uniformly.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line"></span><br><span class="line">class Employee &#123;</span><br><span class="line">public:</span><br><span class="line">    Employee(const std::string&amp; name, float salary): name_(name), salary_(salary) &#123;&#125;</span><br><span class="line">    virtual std::string GetName() &#123; return name_; &#125;</span><br><span class="line">    virtual float GetSalary() &#123; return salary_; &#125;</span><br><span class="line"></span><br><span class="line">protected:</span><br><span class="line">    float salary_;</span><br><span class="line">    std::string name_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Developer : public Employee &#123;</span><br><span class="line">public:</span><br><span class="line">    Developer(const std::string&amp; name, float salary) : Employee(name, salary) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Designer : public Employee &#123;</span><br><span class="line">public:</span><br><span class="line">    Designer(const std::string&amp; name, float salary) : Employee(name, salary) &#123;&#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Organization &#123;</span><br><span class="line">public:</span><br><span class="line">    void AddEmployee(const Employee&amp; employee) &#123;</span><br><span class="line">        employees_.push_back(employee);</span><br><span class="line">    &#125;</span><br><span class="line">    float GetNetSalaries() &#123;</span><br><span class="line">        float net_salary = 0;</span><br><span class="line">        for (auto&amp;&amp; employee : employees_) &#123;</span><br><span class="line">            net_salary += employee.GetSalary();</span><br><span class="line">        &#125;</span><br><span class="line">        return net_salary;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    std::vector&lt;Employee&gt; employees_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Developer john(&quot;John Doe&quot;, 12000);</span><br><span class="line">    Designer jane(&quot;Jane Doe&quot;, 15000);</span><br><span class="line"></span><br><span class="line">    Organization org;</span><br><span class="line">    org.AddEmployee(john);</span><br><span class="line">    org.AddEmployee(jane);</span><br><span class="line"></span><br><span class="line">    std::cout &lt;&lt; &quot;Net salaries: &quot; &lt;&lt; org.GetNetSalaries() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>ç»„åˆæ¨¡å¼åœ¨æˆ‘çœ‹æ¥ç”šè‡³ç§°ä¸ä¸Šä»€ä¹ˆæ¨¡å¼, å…¶æ ¸å¿ƒå°±æ˜¯<strong>å¤šæ€</strong>ç‰¹æ€§çš„ä½“ç°. å¦ä¸€ä¸ªæ ¸å¿ƒåœ¨äº, å®¹å™¨å­˜å‚¨çš„æ˜¯æ¥å£ç±»å‹, åˆ©ç”¨å¤šæ€, å¯ä»¥è¿­ä»£å¤„ç†é€šç”¨æ“ä½œ.</p>
<h3 id="â˜•-è£…é¥°"><a href="#â˜•-è£…é¥°" class="headerlink" title="â˜• è£…é¥°"></a>â˜• è£…é¥°</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å‡è®¾ä½ ç»è¥ä¸€å®¶æä¾›å¤šç§æœåŠ¡çš„æ±½è½¦æœåŠ¡åº—. ä½ å¦‚ä½•æ¥è®¡ç®—æ”¶è´¹è´¦å•? é€šå¸¸ä¼šé€‰æ‹©ä¸€é¡¹æœåŠ¡çš„åŒæ—¶, åŠ¨æ€æ›´æ–°æœåŠ¡çš„æ€»ä»·. è¿™é‡Œ, æ¯ä¸€ç§æœåŠ¡éƒ½æ˜¯è£…é¥°å™¨.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>è£…é¥°æ¨¡å¼å°†å¯¹è±¡åŒ…è£…åœ¨è£…é¥°ç±»å¯¹è±¡ä¸­, ä»è€Œåœ¨è¿è¡Œæ—¶åŠ¨æ€æ”¹å˜è¯¥å¯¹è±¡çš„è¡Œä¸º.</p>
</blockquote>
<p>Wikipediaï¼š</p>
<blockquote>
<p>In object-oriented programming, the decorator pattern is a design pattern that allows behavior to be added to an individual object, either statically or dynamically, without affecting the behavior of other objects from the same class. The decorator pattern is often useful for adhering to the Single Responsibility Principle, as it allows functionality to be divided between classes with unique areas of concern.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">class ICoffee &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual float GetCost() = 0;</span><br><span class="line">    virtual std::string GetDescription() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class SimpleCoffee : public ICoffee &#123;</span><br><span class="line">public:</span><br><span class="line">    float GetCost() override &#123; return 10; &#125;</span><br><span class="line">    std::string GetDescription() override &#123; return &quot;Simple coffee&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class CoffeePlus : public ICoffee &#123;</span><br><span class="line">public:</span><br><span class="line">    CoffeePlus(ICoffee&amp; coffee): coffee_(coffee) &#123;&#125;</span><br><span class="line">    virtual float GetCost() = 0;</span><br><span class="line">    virtual std::string GetDescription() = 0;</span><br><span class="line">protected:</span><br><span class="line">    ICoffee&amp; coffee_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class MilkCoffee : public CoffeePlus &#123;</span><br><span class="line">public:</span><br><span class="line">    MilkCoffee(ICoffee&amp; coffee): CoffeePlus(coffee) &#123;&#125;</span><br><span class="line">    float GetCost() override &#123; return coffee_.GetCost() + 2; &#125;</span><br><span class="line">    std::string GetDescription() override &#123; return coffee_.GetDescription() + &quot;, milk&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class WhipCoffee : public CoffeePlus &#123;</span><br><span class="line">public:</span><br><span class="line">    WhipCoffee(ICoffee&amp; coffee): CoffeePlus(coffee) &#123;&#125;</span><br><span class="line">    float GetCost() override &#123; return coffee_.GetCost() + 5; &#125;</span><br><span class="line">    std::string GetDescription() override &#123; return coffee_.GetDescription() + &quot;, whip&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class VanillaCoffee : public CoffeePlus &#123;</span><br><span class="line">public:</span><br><span class="line">    VanillaCoffee(ICoffee&amp; coffee): CoffeePlus(coffee) &#123;&#125;</span><br><span class="line">    float GetCost() override &#123; return coffee_.GetCost() + 3; &#125;</span><br><span class="line">    std::string GetDescription() override &#123; return coffee_.GetDescription() + &quot;, vanilla&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    ICoffee* someCoffee = new SimpleCoffee();</span><br><span class="line">    std::cout &lt;&lt; someCoffee-&gt;GetCost() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; someCoffee-&gt;GetDescription() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    someCoffee = new MilkCoffee(*someCoffee);</span><br><span class="line">    std::cout &lt;&lt; someCoffee-&gt;GetCost() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; someCoffee-&gt;GetDescription() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    someCoffee = new WhipCoffee(*someCoffee);</span><br><span class="line">    std::cout &lt;&lt; someCoffee-&gt;GetCost() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; someCoffee-&gt;GetDescription() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    someCoffee = new VanillaCoffee(*someCoffee);</span><br><span class="line">    std::cout &lt;&lt; someCoffee-&gt;GetCost() &lt;&lt; std::endl;</span><br><span class="line">    std::cout &lt;&lt; someCoffee-&gt;GetDescription() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>è£…é¥°æ¨¡å¼çš„å½¢æ€å¾ˆæœ‰æ„æ€, åƒæ˜¯é™æ€è¯­è¨€çš„åŠ¨æ€åŒ–. å…¶å®å®ç°ä¸Šä¸ç»„åˆæ¨¡å¼ç±»ä¼¼, ä½†å…³é”®ä¹‹å¤„åœ¨äº, å…¶<strong>ä¾èµ–çš„å¯¹è±¡æ˜¯å…¶çˆ¶ç±»æ¥å£</strong>. é¡¾åæ€ä¹‰, è£…é¥°æ¨¡å¼, è£…é¥°çš„æ˜¯å¯¹è±¡è‡ªèº«, ä¸”æ”¯æŒé‡å¤è£…é¥°. è­¬å¦‚ä¸Šè¿°å®ä¾‹ä¸­, å®Œå…¨å¯ä»¥åŠ ä¸¤éç‰›å¥¶. ä½†æœ€ç»ˆè¦ä¿è¯æ¥å£çš„ä¸€è‡´æ€§, å°±åƒä½ çš„æˆ¿å­æ— è®ºè£…é¥°æˆä»€ä¹ˆæ ·å­, å®ƒä¾ç„¶åªæ˜¯ä½ çš„æˆ¿å­.</p>
<h3 id="ğŸ“¦-å¤–è§‚"><a href="#ğŸ“¦-å¤–è§‚" class="headerlink" title="ğŸ“¦ å¤–è§‚"></a>ğŸ“¦ å¤–è§‚</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å¦‚ä½•å¼€æœº? ä½ ä¼šè¯´â€æŒ‰ä¸€ä¸‹ç”µæºé”®â€. ä½ ä¼šæœ‰è¿™æ ·çš„ååº”, æ˜¯å› ä¸ºè®¡ç®—æœºæä¾›äº†ä¸€ä¸ªè¶…çº§ç®€å•çš„æ¥å£, è€Œéšè—äº†ä¸€ç³»åˆ—å¤æ‚çš„å¼€æœºæ“ä½œæ‰€è‡´. è¿™ä¸ªç®€å•æ¥å£, å¯¹äºå¤æ‚æ“ä½œæ¥è¯´, å°±æ˜¯å¤–è§‚.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å¤–è§‚æ¨¡å¼ä¸ºå¤æ‚çš„å­ç³»ç»Ÿæä¾›äº†ä¸€ä¸ªç®€å•æ¥å£.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>A facade is an object that provides a simplified interface to a larger body of code, such as a class library.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class Computer &#123;</span><br><span class="line">public:</span><br><span class="line">    void GetElectricShock() &#123; std::cout &lt;&lt; &quot;Ouch!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void MakeSound() &#123; std::cout &lt;&lt; &quot;Beep beep!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void ShowLoadingScreen() &#123; std::cout &lt;&lt; &quot;Loading...&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Bam() &#123; std::cout &lt;&lt; &quot;Ready to be used!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void CloseEverything() &#123; std::cout &lt;&lt; &quot;Bup bup bup buzzzz!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Sooth() &#123; std::cout &lt;&lt; &quot;Zzzzz&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void PullCurrent() &#123; std::cout &lt;&lt; &quot;Haaah!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class ComputerFacade &#123;</span><br><span class="line">public:</span><br><span class="line">    ComputerFacade(Computer&amp; computer): computer_(computer) &#123;&#125;</span><br><span class="line">    void TurnOn() &#123;</span><br><span class="line">        computer_.GetElectricShock();</span><br><span class="line">        computer_.MakeSound();</span><br><span class="line">        computer_.ShowLoadingScreen();</span><br><span class="line">        computer_.Bam();</span><br><span class="line">    &#125;</span><br><span class="line">    void TurnOff() &#123;</span><br><span class="line">        computer_.CloseEverything();</span><br><span class="line">        computer_.PullCurrent();</span><br><span class="line">        computer_.Sooth();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    Computer&amp; computer_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Computer real_computer;</span><br><span class="line">    ComputerFacade computer(real_computer);</span><br><span class="line">    computer.TurnOn();</span><br><span class="line">    computer.TurnOff();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>åŒæ ·å¾ˆéš¾ç§°ä¹‹ä¸ºæ¨¡å¼çš„æ¨¡å¼. ç”¨çš„ä¾ç„¶æ˜¯â€å¤šåŠ ä¸€å±‚â€çš„æ€æƒ³, é€šè¿‡å°è£…çš„æ–¹å¼æ¥å®ç°. å¤šçš„è¿™ä¸€å±‚, å°±æ˜¯æ‰€è°“çš„â€å¤–è§‚â€äº†.</p>
<h3 id="ğŸƒ-äº«å…ƒ"><a href="#ğŸƒ-äº«å…ƒ" class="headerlink" title="ğŸƒ äº«å…ƒ"></a>ğŸƒ äº«å…ƒ</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>ä½ æœ‰æ²¡æœ‰åœ¨æ‘Šä½è¾¹å–ç°æ³¡èŒ¶çš„ä½“éªŒ? ä»–ä»¬ç»å¸¸é™¤äº†ä½ è¦æ±‚çš„è¿™ä¸€æ¯å¤–, è¿˜é¢å¤–æ²æ›´å¤šçš„èŒ¶, ç•™ç»™å…¶ä»–çš„æ½œåœ¨å®¢æˆ·. ä»¥æ­¤æ¥èŠ‚çœèµ„æº, åŒ…æ‹¬çƒ­æ°”, ç«å€™ç­‰. äº«å…ƒæ¨¡å¼å°±æ˜¯é’ˆå¯¹è¿™ä¸€ç‰¹ç‚¹çš„: å…±äº«.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<p>é€šå¸¸ä»¥æœ€å°çš„å­˜å‚¨ç”¨é‡æˆ–è®¡ç®—æˆæœ¬ä¸ºä»£ä»·, å…±äº«ç»™å°½å¯èƒ½å¤šçš„ç›¸ä¼¼å¯¹è±¡.</p>
<p>Wikipedia:</p>
<blockquote>
<p>In computer programming, flyweight is a software design pattern. A flyweight is an object that minimizes memory use by sharing as much data as possible with other similar objects; it is a way to use objects in large numbers when a simple repeated representation would use an unacceptable amount of memory.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;unordered_map&gt;</span><br><span class="line"></span><br><span class="line">// Anything that will be cached is flyweight.</span><br><span class="line">// Types of tea here will be flyweights.</span><br><span class="line">class KarakTea &#123;&#125;;</span><br><span class="line"></span><br><span class="line">class TeaMaker &#123;</span><br><span class="line">public:</span><br><span class="line">    KarakTea* Make(const std::string&amp; preference) &#123;</span><br><span class="line">        if (availableTea_.find(preference) == availableTea_.end())</span><br><span class="line">            availableTea_.insert(&#123;preference, new KarakTea()&#125;);</span><br><span class="line"></span><br><span class="line">        return availableTea_.at(preference);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    std::unordered_map&lt;std::string, KarakTea*&gt; availableTea_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class TeaShop &#123;</span><br><span class="line">public:</span><br><span class="line">    TeaShop(TeaMaker&amp; teaMaker): teaMaker_(teaMaker) &#123;&#125;</span><br><span class="line">    void TakeOrder(const std::string&amp; teaType, int table) &#123;</span><br><span class="line">        orders_[table] = teaMaker_.Make(teaType);</span><br><span class="line">    &#125;</span><br><span class="line">    void Serve() &#123;</span><br><span class="line">        for(auto order : orders_)</span><br><span class="line">            std::cout &lt;&lt; &quot;Serving tea to table# &quot; &lt;&lt; order.first &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    std::unordered_map&lt;int, KarakTea*&gt; orders_;</span><br><span class="line">    TeaMaker&amp; teaMaker_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    TeaMaker teaMaker;</span><br><span class="line">    TeaShop shop(teaMaker);</span><br><span class="line"></span><br><span class="line">    shop.TakeOrder(&quot;less sugar&quot;, 1);</span><br><span class="line">    shop.TakeOrder(&quot;more milk&quot;, 2);</span><br><span class="line">    shop.TakeOrder(&quot;without sugar&quot;, 5);</span><br><span class="line"></span><br><span class="line">    shop.Serve();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>äº«å…ƒæ¨¡å¼çš„æœ¬è´¨å°±æ˜¯æœ€åŸºæœ¬çš„<strong>ç¼“å­˜</strong>æ€æƒ³, æ— è®ºæ˜¯è®¡ç®—æœºä½“ç³»ç»“æ„ä¸­çš„ cache è¿˜æ˜¯æ“ä½œç³»ç»Ÿä¸­çš„ page table, éƒ½æ˜¯è¿™ç§æ€æƒ³çš„ä½“ç°. åœ¨ç¨‹åºè®¾è®¡ä¸­, å®ç°è¿™ä¸€æ€æƒ³, æœ€å¸¸ç”¨çš„æ•°æ®ç»“æ„å°±æ˜¯å“ˆå¸Œè¡¨. å¦‚ä¾‹å­ä¸­æ‰€ç¤º. å…¶æœ€ç®€å•çš„ç”¨æ³•æè¿°å°±æ˜¯: key å­˜åœ¨äº†, ç›´æ¥å–èµ°; ä¸å­˜åœ¨, åˆ›å»ºä¸€ä¸ª. ä»¥æ­¤èŠ‚çœé‡å¤çš„åˆ›å»ºä¸å†—ä½™çš„ç©ºé—´.</p>
<h3 id="ğŸ±-ä»£ç†"><a href="#ğŸ±-ä»£ç†" class="headerlink" title="ğŸ± ä»£ç†"></a>ğŸ± ä»£ç†</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>ä½ åº”è¯¥ç”¨è¿‡é—¨ç¦å¡å¼€é—¨å§? å…¶å®æœ‰å¾ˆå¤šç§æ–¹å¼æ¥å¼€é—¨, å¦‚ç”¨é—¨ç¦å¡, æˆ–æ˜¯è¾“å…¥å®‰å…¨å¯†ç ç­‰ç­‰. é—¨çš„ä¸»è¦åŠŸèƒ½æœ¬æ¥åªæ˜¯â€å¼€â€, è€Œç°åœ¨é—¨ç¦ç³»ç»Ÿå°±åƒæ˜¯åŠ ä¹‹äºé—¨çš„ä»£ç†, ä½¿ä¹‹æ‹¥æœ‰äº†æ›´å¤šçš„åŠŸèƒ½. ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¼šæ›´å¥½çš„é˜è¿°è¿™ä¸€æ€è·¯.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>ä½¿ç”¨ä»£ç†æ¨¡å¼, ä¸€ä¸ªç±»ä¼šè¡¨ç°å‡ºå¦ä¸€ä¸ªç±»çš„åŠŸèƒ½.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>A proxy, in its most general form, is a class functioning as an interface to something else. A proxy is a wrapper or agent object that is being called by the client to access the real serving object behind the scenes. Use of the proxy can simply be forwarding to the real object, or can provide additional logic. In the proxy extra functionality can be provided, for example caching when operations on the real object are resource intensive, or checking preconditions before operations on the real object are invoked.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">class IDoor &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void Open() = 0;</span><br><span class="line">    virtual void Close() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class LabDoor : public IDoor &#123;</span><br><span class="line">public:</span><br><span class="line">    void Open() override &#123; std::cout &lt;&lt; &quot;Opening lab door&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Close() override &#123; std::cout &lt;&lt; &quot;Closing the lab door&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Security &#123;</span><br><span class="line">public:</span><br><span class="line">    Security(IDoor&amp; door): door_(door) &#123;&#125;</span><br><span class="line">    bool Authenticate(const std::string&amp; password) &#123; return password == &quot;$ecr@t&quot;; &#125;</span><br><span class="line">    void Open(const std::string&amp; password) &#123;</span><br><span class="line">        if (Authenticate(password)) door_.Open();</span><br><span class="line">        else std::cout &lt;&lt; &quot;Big no! It ain&apos;t possible.&quot; &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">    void Close() &#123; door_.Close(); &#125;</span><br><span class="line"></span><br><span class="line">private:</span><br><span class="line">    IDoor&amp; door_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    LabDoor labDoor;</span><br><span class="line">    Security securityDoor(labDoor);</span><br><span class="line">    securityDoor.Open(&quot;invalid&quot;);</span><br><span class="line">    securityDoor.Open(&quot;$ecr@t&quot;);</span><br><span class="line">    securityDoor.Close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦ä¸€ä¸ªä¾‹å­æ˜¯ä¸€äº›æ•°æ®æ˜ å°„çš„å®ç°. ä¾‹å¦‚, æˆ‘æœ€è¿‘ä¸º MongoDB åšäº†ä¸€ä¸ª ODM (å¯¹è±¡æ•°æ®æ˜ å°„), ä½¿ç”¨çš„å°±æ˜¯è¿™ä¸ªæ¨¡å¼: æˆ‘ç”¨é­”æœ¯æ–¹æ³• <code>_call()</code> ç»™ MongoDB çš„ç±»åŠ äº†ä¸€ä¸ªä»£ç†. æ‰€æœ‰æ–¹æ³•é€šè¿‡ä»£ç†, å®é™…éƒ½ä¼šè°ƒç”¨ MongoDB ç±»çš„æ–¹æ³•, å¹¶è¿”å›å…¶è°ƒç”¨ç»“æœ. ä½†æˆ‘å¢åŠ äº†ä¸¤ä¸ªç‰¹ä¾‹: <code>find</code> å’Œ <code>findOne</code> æ–¹æ³•æŸ¥è¯¢æ•°æ®æ—¶, ä¼šè¢«æ˜ å°„åˆ°ç›¸åº”çš„å¯¹è±¡, å¹¶è¿”å›è¯¥å¯¹è±¡. è€Œä¸å†æ˜¯è¿”å› <code>Cursor</code> äº†.</p>
<p><strong>æœ¬è´¨</strong>:</p>
<p>ä¾ç„¶ä½“ç°äº†<strong>åŠ ä¸€å±‚</strong>çš„æ€æƒ³, è¿™ä¸ä¸Šé¢é‡åˆ°çš„<a>é€‚é…å™¨æ¨¡å¼</a>å’Œ<a>å¤–è§‚æ¨¡å¼</a>éƒ½å¾ˆç±»ä¼¼. è¿™é‡Œæˆ‘ä»¬å…ˆæ¯”è¾ƒä¸€ä¸‹ä¸‰è€…çš„å·®åˆ«: é€‚é…å™¨çš„ç›®çš„å¾ˆæ˜ç¡®, æ˜¯ä¸ºäº†é€‚åº”å·²æœ‰æ¥å£, å‡ºå‘ç‚¹æ˜¯å…¼å®¹; å¤–è§‚æ¨¡å¼çš„ç›®çš„æ˜¯ç®€åŒ–ç¹ççš„æ¥å£, å‡ºå‘ç‚¹æ˜¯å°è£…; è€Œä»£ç†æ¨¡å¼çš„ç›®çš„æ˜¯å¢åŠ æ›´å¤šåŠŸèƒ½, å‡ºå‘ç‚¹ä¹Ÿæ˜¯å…¼å®¹. ä½†ä»£ç†æ¨¡å¼çš„å…¼å®¹, ä¸é€‚é…å™¨æœ‰å¾ˆå¤§å·®åˆ«, é€‚é…å™¨æ˜¯çœŸçš„ä»æ¥å£ä¸Šå…¼å®¹, ç»§æ‰¿åŒæ ·çš„æ¥å£ç±», å®ç°çˆ¶ç±»çš„è™šæ–¹æ³•; ä»£ç†æ¨¡å¼åˆ™ä¸ç„¶, å®ƒçš„å…¼å®¹, æ›´åƒæ˜¯ä¸€ç§<strong>ä¼ªè£…</strong>, åªæ˜¯æ¥å£çš„åç§°ä¿æŒä¸€è‡´, ä½†å®é™…ä¸Šå¹¶æ— å¤šå¤§å…³è”. è­¬å¦‚ä¾‹å­é‡Œ, ä»¥å‰ä½ ç”¨é—¨, æœ‰ <code>Open</code> å’Œ <code>Close</code> æ–¹æ³•, ç°åœ¨æ¢æˆå®‰å…¨é—¨äº†, ä½ ä¾ç„¶ä¹ æƒ¯æ€§çš„æƒ³ç”¨è¿™ä¸¤ç§æ–¹æ³•. ç„¶è€Œå®‰å…¨é—¨åªæ˜¯é—¨çš„ä»£ç†, æ‰€ä»¥å®ƒçš„è¿™ä¸¤ç§åŒåæ–¹æ³•, å…¶å®æ˜¯ä¼ªé€ ç»™ä½ çœ‹çš„, ä¸ä¹‹å‰çš„æ–¹æ³•å¹¶æ— æ¥å£ä¸Šçš„å…¼å®¹æ€§.</p>
<p>ä»£ç†æ¨¡å¼å¹¿æ³›ä½¿ç”¨åœ¨ API è®¾è®¡ä¸­, å…¶æ ¸å¿ƒæ˜¯ä¸ºäº†å…¼å®¹ç”¨æˆ·ä¹ æƒ¯.</p>
<h2 id="è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼"><a href="#è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼" class="headerlink" title="è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼"></a>è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼</h2><p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å…³æ³¨å¯¹è±¡é—´çš„è´£ä»»åˆ†é…. å®ƒä»¬ä¸ç»“æ„æ¨¡å¼æœ€å¤§çš„ä¸åŒåœ¨äº: å®ƒä»¬ä¸ä»…ä»…æŒ‡å®šç»“æ„, è¿˜æ¦‚è¿°äº†ç»“æ„ä¹‹é—´<strong>æ¶ˆæ¯ä¼ é€’/é€šè®¯çš„æ¨¡å¼</strong>. æ¢å¥è¯è¯´, å®ƒä»¬å›ç­”äº†â€è½¯ä»¶ç»„ä»¶ä»¬çš„è¡Œä¸ºæ˜¯å¦‚ä½•è¿è½¬çš„â€è¿™ä¸ªé—®é¢˜.</p>
</blockquote>
<p>Wikipadia:</p>
<blockquote>
<p>In software engineering, behavioral design patterns are design patterns that identify common communication patterns between objects and realize these patterns. By doing so, these patterns increase flexibility in carrying out this communication.</p>
</blockquote>
<ul>
<li><a>è´£ä»»é“¾</a></li>
<li><a>å‘½ä»¤</a></li>
<li><a>è¿­ä»£å™¨</a></li>
<li><a>ä¸­ä»‹è€…</a></li>
<li><a>å¤‡å¿˜å½•</a></li>
<li><a>è§‚å¯Ÿè€…</a></li>
<li><a>è®¿é—®è€…</a></li>
<li><a>ç­–ç•¥</a></li>
<li><a>çŠ¶æ€</a></li>
<li><a>æ¨¡æ¿æ–¹æ³•</a></li>
</ul>
<h3 id="ğŸ”—-è´£ä»»é“¾"><a href="#ğŸ”—-è´£ä»»é“¾" class="headerlink" title="ğŸ”— è´£ä»»é“¾"></a>ğŸ”— è´£ä»»é“¾</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å‡è®¾, æ‚¨çš„è´¦æˆ·é‡Œæœ‰ä¸‰ç§ä»˜æ¬¾æ–¹å¼å¯ä¾›é€‰æ‹©(A, B å’Œ C). ä½†é¢åº¦å„ä¸ä¸€æ ·, A æœ‰ 100$, B æœ‰ 300$, C æœ‰ 1000$. æ”¯ä»˜ä¼˜å…ˆçº§é¡ºåºæ˜¯ä» A åˆ° C. å½“æ‚¨å°è¯•è´­ä¹°ä»·æ ¼ä¸º 210$ çš„ä¸œè¥¿æ—¶, ç”¨è´£ä»»é“¾æ¥å¤„ç†, ä¼šå…ˆå»çœ‹ A æ–¹å¼å¯å¦æå®š, å¦‚æœæä¸å®š, å°±å†å»ç”¨ B, å¦‚æœä¾ç„¶æä¸å®š, å†å»ç”¨ C. ç›´åˆ°æ‰¾åˆ°åˆé€‚çš„æ–¹å¼. è¿™é‡Œçš„ A, B å’Œ C æ„æˆçš„é“¾æ¡, ä»¥åŠè¿™æ ·çš„ç°è±¡å°±æ˜¯è´£ä»»é“¾.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å®ƒæœ‰åŠ©äºå»ºç«‹ä¸€æ¡å¯¹è±¡é“¾. è¯·æ±‚ä¼šä»ä¸€ç«¯å¼€å§‹, ä¾æ¬¡è®¿é—®å¯¹è±¡, ç›´åˆ°æ‰¾åˆ°åˆé€‚çš„å¤„ç†ç¨‹åº.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In object-oriented design, the chain-of-responsibility pattern is a design pattern consisting of a source of command objects and a series of processing objects. Each processing object contains logic that defines the types of command objects that it can handle; the rest are passed to the next processing object in the chain.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;exception&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line"></span><br><span class="line">class Account &#123;</span><br><span class="line">public:</span><br><span class="line">    Account(float balance) : balance_(balance) &#123;&#125;</span><br><span class="line">    virtual std::string GetClassName() &#123; return &quot;Account&quot;; &#125;</span><br><span class="line">    void SetNext(Account* const account) &#123; successor_ = account; &#125;</span><br><span class="line">    bool CanPay(float amount) &#123; return balance_ &gt;= amount; &#125;</span><br><span class="line">    void Pay(float amountToPay) &#123;</span><br><span class="line">        if (CanPay(amountToPay)) &#123;</span><br><span class="line">            std::cout &lt;&lt; &quot;Paid &quot; &lt;&lt; amountToPay &lt;&lt; &quot; using &quot; &lt;&lt; GetClassName() &lt;&lt; std::endl;</span><br><span class="line">        &#125; else if (successor_) &#123;</span><br><span class="line">            std::cout &lt;&lt; &quot;Cannot pay using &quot; &lt;&lt; GetClassName() &lt;&lt; &quot;. Proceeding...&quot; &lt;&lt; std::endl;</span><br><span class="line">            successor_-&gt;Pay(amountToPay);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            throw &quot;None of the accounts have enough balance.&quot;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">protected:</span><br><span class="line">    Account* successor_ = nullptr;</span><br><span class="line">    float balance_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Bank : public Account &#123;</span><br><span class="line">public:</span><br><span class="line">    Bank(float balance) : Account(balance) &#123;&#125;</span><br><span class="line">    std::string GetClassName() override &#123; return &quot;Bank&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Paypal : public Account &#123;</span><br><span class="line">public:</span><br><span class="line">    Paypal(float balance) : Account(balance) &#123;&#125;</span><br><span class="line">    std::string GetClassName() override &#123; return &quot;Paypal&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Bitcoin : public Account &#123;</span><br><span class="line">public:</span><br><span class="line">    Bitcoin(float balance) : Account(balance) &#123;&#125;</span><br><span class="line">    std::string GetClassName() override &#123; return &quot;Bitcoin&quot;; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    //! Let&apos;s prepare a chain like below:</span><br><span class="line">    //! bank -&gt; paypal -&gt; bitcoin</span><br><span class="line">    //! First priority bank</span><br><span class="line">    //!   If bank can&apos;t pay then paypal</span><br><span class="line">    //!   If paypal can&apos;t pay then bit coin</span><br><span class="line"></span><br><span class="line">    Bank bank(100); //&gt; Bank with balance 100</span><br><span class="line">    Paypal paypal(200); //&gt; Paypal with balance 200</span><br><span class="line">    Bitcoin bitcoin(300); //&gt; Bitcoin with balance 300</span><br><span class="line"></span><br><span class="line">    bank.SetNext(&amp;paypal);</span><br><span class="line">    paypal.SetNext(&amp;bitcoin);</span><br><span class="line"></span><br><span class="line">    bank.Pay(259);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>è´£ä»»é“¾çš„æœ¬è´¨å…¶å®æ˜¯å¯¹è±¡çš„<strong>å•é“¾è¡¨</strong>å®ç° + å¯¹å•é“¾è¡¨çš„<strong>è¿­ä»£</strong>. ä¸Šè¿°ä¾‹å­ä¸­, æˆ‘ä»¬çš„è¿­ä»£å…¶å®æ˜¯æ¥è¿‘<strong>é€’å½’</strong>çš„å½¢å¼. å¦‚æœæˆ‘ä»¬å°†æ•´ä¸ªè´£ä»»é“¾ä»¥ç»Ÿä¸€çš„å€Ÿå£(<code>Account</code>)å­˜å‚¨åœ¨ <code>list</code> æˆ– <code>vector</code> ä¸­, ç„¶åç”¨ for å¾ªç¯æ¥è¿­ä»£è®¿é—®. ä¹ŸåŒæ ·å¯ç§°ä¸ºè´£ä»»é“¾. æ‰€ä»¥ä¸è¦è¢«åè¯å“å”¬ä½, å§‹ç»ˆå›å½’åˆ°æœ€åŸºæœ¬çš„æ€æƒ³, ä»¥åŠæœ€åŸºæœ¬çš„æ•°æ®ç»“æ„ä¸é€»è¾‘æ‰‹æ®µ. è¿™æ ·æ‰å¯ä»¥çµæ´»åº”ç”¨.</p>
<h3 id="ğŸ‘®-å‘½ä»¤"><a href="#ğŸ‘®-å‘½ä»¤" class="headerlink" title="ğŸ‘® å‘½ä»¤"></a>ğŸ‘® å‘½ä»¤</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>ä¸€ä¸ªå…¸å‹çš„ä¾‹å­æ˜¯, åœ¨é¥­é¦†ç‚¹èœ. ä½ (å®¢æˆ·)è¦æ±‚æœåŠ¡å‘˜(è°ƒç”¨è€…)ä¸Šä¸€äº›é£Ÿç‰©(å‘½ä»¤), ç„¶åæœåŠ¡å‘˜å°†å‘½ä»¤ç®€çŸ­çš„ä¼ è¾¾ç»™å¨å¸ˆ(æ¥æ”¶è€…), å¨å¸ˆæ‹¥æœ‰åšèœçš„å¿…è¦çŸ¥è¯†ä¸æŠ€èƒ½. å¦ä¸€ä¸ªä¾‹å­, ä½ (å®¢æˆ·)ç”¨é¥æ§å™¨(è°ƒç”¨è€…)æ¥åˆ‡æ¢(å‘½ä»¤)ç”µè§†(æ¥æ”¶è€…)èŠ‚ç›®.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å…è®¸ä½ å°†æ“ä½œå°è£…åœ¨å¯¹è±¡ä¸­. è¿™ç§æ¨¡å¼èƒŒåçš„æ ¸å¿ƒæ€æƒ³æ˜¯åˆ†ç¦»å®¢æˆ·ä¸æ¥æ”¶è€….</p>
</blockquote>
<p>Wikipadia:</p>
<blockquote>
<p>In object-oriented programming, the command pattern is a behavioral design pattern in which an object is used to encapsulate all information needed to perform an action or trigger an event at a later time. This information includes the method name, the object that owns the method and values for the method parameters.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class Bulb &#123;</span><br><span class="line">  public:</span><br><span class="line">    void TurnOn() &#123; std::cout &lt;&lt; &quot;Bulb has been lit&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void TurnOff() &#123; std::cout &lt;&lt; &quot;Darkness!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class ICommand &#123;</span><br><span class="line">  public:</span><br><span class="line">    virtual void Execute() = 0;</span><br><span class="line">    virtual void Undo() = 0;</span><br><span class="line">    virtual void Redo() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class TurnOn : public ICommand &#123;</span><br><span class="line">  public:</span><br><span class="line">    TurnOn(Bulb&amp; bulb): bulb_(bulb) &#123;&#125;</span><br><span class="line">    void Execute() override &#123; bulb_.TurnOn(); &#125;</span><br><span class="line">    void Undo() override &#123; bulb_.TurnOff(); &#125;</span><br><span class="line">    void Redo() override &#123; Execute(); &#125;</span><br><span class="line">  private:</span><br><span class="line">    Bulb&amp; bulb_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class TurnOff : public ICommand &#123;</span><br><span class="line">  public:</span><br><span class="line">    TurnOff(Bulb&amp; bulb): bulb_(bulb) &#123;&#125;</span><br><span class="line">    void Execute() override &#123; bulb_.TurnOff(); &#125;</span><br><span class="line">    void Undo() override &#123; bulb_.TurnOn(); &#125;</span><br><span class="line">    void Redo() override &#123; Execute(); &#125;</span><br><span class="line">  private:</span><br><span class="line">    Bulb&amp; bulb_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class RemoteControl &#123;</span><br><span class="line">  public:</span><br><span class="line">    void Submit(ICommand&amp; command) &#123; command.Execute(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">  Bulb bulb;</span><br><span class="line">  TurnOn turnOn(bulb);</span><br><span class="line">  TurnOff turnOff(bulb);</span><br><span class="line"></span><br><span class="line">  RemoteControl remote;</span><br><span class="line">  remote.Submit(turnOn);</span><br><span class="line">  remote.Submit(turnOff);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å‘½ä»¤æ¨¡å¼é€šå¸¸è¢«ç”¨æ¥å®ç°äº¤æ˜“åŸºç¡€ç³»ç»Ÿ, å½“ä½ æ‰§è¡Œä¸€ç³»åˆ—å‘½ä»¤çš„åŒæ—¶ç»´ç³»ä¸€ä¸ªå†å²è®°å½•. å¦‚æœæœ€ç»ˆå‘½ä»¤æ‰§è¡ŒæˆåŠŸå°±ç½¢äº†, è‹¥ä¸æˆåŠŸ, å°†é€šè¿‡å†å²å›æº¯, æ¥æ’¤é”€è¿™ä¸€ç³»åˆ—å‘½ä»¤.(è¿™æ›´åƒæ˜¯ä¸€ä¸ªåŸå­å‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹, è¯·è§<a href="https://en.wikipedia.org/wiki/ACID" target="_blank" rel="noopener">ACID</a>)</p>
<p><strong>æœ¬è´¨</strong>:</p>
<p>å‘½ä»¤æ¨¡å¼æœ¬è´¨ä¸Š, æ˜¯å¯¹<strong>æ¶ˆæ¯åè®®çš„ä¸€ç§æŠ½è±¡</strong>, è€Œç”¨çš„æ‰‹æ³•æ˜¯<strong>å›è°ƒ</strong>. å°±åƒä¸¾å‡ºçš„ä¾‹å­é‡Œ, æå‡ºè¦æ±‚çš„æ˜¯å®¢æˆ·, æ‰§è¡Œè¦æ±‚çš„æ˜¯å¨å¸ˆ, è€Œè¿æ¥ä¸¤è€…çš„æ˜¯æœåŠ¡å‘˜, ä½†çœŸæ­£è¿æ¥è€…æ˜¯æ¶ˆæ¯çš„æ¥å£, è¿™ä¸ªå°±æ˜¯å‘½ä»¤. åŒæ ·çš„, ç”µè§†æœºé¥æ§å™¨ä¹Ÿæ˜¯å‘½ä»¤. è¿™ä¸ªå‘½ä»¤ä¸€å®šå…·å¤‡â€ç®€å•â€, â€œé«˜ç²’åº¦â€ç­‰ç‰¹ç‚¹. é€šå¸¸åœ¨è¿ç”¨çš„æ—¶å€™, ä¼šåŠ ä¸Šå¯¹è¿™ä¸ªå‘½ä»¤çš„å†å²è®°å½•ä¸å›æº¯. ä¹Ÿå°±æ˜¯ç¤ºä¾‹ä»£ç ä¸­çš„é‚£ä¸‰ä¸ªåŸºæœ¬æ¥å£: <code>execute</code>, <code>undo</code>, <code>redo</code>. å€¼å¾—æ³¨æ„çš„æ˜¯, <code>execute</code> ä¸€å®šæ˜¯ ACID çš„, é€šå¸¸ä¼šæ˜¯åŒ…å«ä¸€ç³»åˆ—å‘½ä»¤çš„é›†åˆ. ä¸€æ—¦æœ‰ä¸€ä¸ªå‘½ä»¤æ‰§è¡Œå¤±è´¥, é‚£ä¹ˆä¼šæ•´ä½“å›æ»š.</p>
<h3 id="â¿-è¿­ä»£å™¨"><a href="#â¿-è¿­ä»£å™¨" class="headerlink" title="â¿ è¿­ä»£å™¨"></a>â¿ è¿­ä»£å™¨</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>è€å¼çš„æ”¶éŸ³æœºæ˜¯è¿­ä»£å™¨çš„ä¸€ä¸ªå¥½ä¾‹å­, ç”¨æˆ·å¯ä»¥ä»ä»»æ„é¢‘é“å¼€å§‹, é€šè¿‡ç‚¹å‡»â€ä¸‹ä¸€ä¸ªâ€æˆ–â€ä¸Šä¸€ä¸ªâ€æŒ‰é’®, æ¥æµè§ˆå“åº”çš„é¢‘é“. ä¹Ÿå¯ä»¥ç”¨ MP3 æ’­æ”¾å™¨å’Œç”µè§†æœºæ¥ä¸¾ä¾‹, ä½ åŒæ ·å¯ä»¥é€šè¿‡â€å‘å‰â€å’Œâ€å‘åâ€æŒ‰é’®æ¥è¿ç»­åˆ‡æ¢é¢‘é“. æ¢å¥è¯è¯´, å®ƒä»¬éƒ½æä¾›äº†ä¸€ä¸ªæ¥å£æ¥éå†å„ä¸ªé¢‘é“, æ­Œæ›²æˆ–ç”µå°.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å®ƒå‘ˆç°äº†ä¸€ç§è®¿é—®å¯¹è±¡å…ƒç´ , å´ä¸æš´éœ²åº•å±‚æ–¹æ³•çš„æ–¹å¼.</p>
</blockquote>
<p>Wikipadia:</p>
<blockquote>
<p>In object-oriented programming, the iterator pattern is a design pattern in which an iterator is used to traverse a container and access the containerâ€™s elements. The iterator pattern decouples algorithms from containers; in some cases, algorithms are necessarily container-specific and thus cannot be decoupled.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line"></span><br><span class="line">class RadioStation &#123;</span><br><span class="line">  friend bool operator==(const RadioStation&amp; lhs, const RadioStation&amp; rhs) &#123; return lhs.frequency_ == rhs.frequency_; &#125;</span><br><span class="line">public:</span><br><span class="line">  RadioStation(float frequency): frequency_(frequency) &#123;&#125;</span><br><span class="line">  float GetFrequency() const &#123; return frequency_; &#125;</span><br><span class="line">private:</span><br><span class="line">  float frequency_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class StationList &#123;</span><br><span class="line">  using Iter = std::vector&lt;RadioStation&gt;::iterator;</span><br><span class="line">public:</span><br><span class="line">  void AddStation(const RadioStation&amp; station) &#123; stations_.push_back(station); &#125;</span><br><span class="line">  void RemoveStation(const RadioStation&amp; toRemove) &#123;</span><br><span class="line">    auto found = std::find(stations_.begin(), stations_.end(), toRemove);</span><br><span class="line">    if (found != stations_.end()) stations_.erase(found);</span><br><span class="line">  &#125;</span><br><span class="line">  Iter begin() &#123; return stations_.begin(); &#125;</span><br><span class="line">  Iter end() &#123; return stations_.end(); &#125;</span><br><span class="line">private:</span><br><span class="line">  std::vector&lt;RadioStation&gt; stations_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">  StationList stationList;</span><br><span class="line">  stationList.AddStation(RadioStation(89));</span><br><span class="line">  stationList.AddStation(RadioStation(101));</span><br><span class="line">  stationList.AddStation(RadioStation(102));</span><br><span class="line">  stationList.AddStation(RadioStation(103.2));</span><br><span class="line"></span><br><span class="line">  for (auto&amp;&amp; station : stationList)</span><br><span class="line">    std::cout &lt;&lt; station.GetFrequency() &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">  stationList.RemoveStation(RadioStation(89)); // Will remove station 89</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>åŒæ ·ç§°ä¸ä¸Šæ¨¡å¼çš„æ¨¡å¼. è¿™é‡Œçš„è¿­ä»£å™¨ä¸ C++ ä¸­è¿­ä»£å™¨çš„æ¦‚å¿µå®Œå…¨ç›¸åŒ. æˆ‘è§‰å¾—æ˜¯å¦å°†è¯­è¨€ä¸­æœ¬æœ‰çš„å®¹å™¨åŒ…è£…æˆå¯¹è±¡, è¦é€‚å½“å–èˆ. åˆ‡è«ä¸ºäº†è®¾è®¡è€Œè®¾è®¡. å°±ç¤ºä¾‹ä»£ç è€Œè¨€, <code>StationList</code> å¯¹è±¡å®Œå…¨å¤šæ­¤ä¸€ä¸¾, è£¸ç”¨å®¹å™¨å°±å¯ä»¥è§£å†³. åœ¨å®é™…åº”ç”¨ä¸­, é™¤éä¸ºäº†æ¥å£ä¸Šçš„ç»Ÿä¸€, è€Œä½¿ç”¨ä¸€ä¸ªä»£ç†(<code>StationList</code> å°±æ˜¯ä¸€ä¸ªä»£ç†ç±»), å¦åˆ™å®Œå…¨ä¸ç”¨è¿‡åº¦è®¾è®¡. è¿­ä»£å™¨çš„æœ¬è´¨, å°±æ˜¯è¿­ä»£. è¿™æ˜¯ç¨‹åºè¯­è¨€æœ€åŸºç¡€çš„ä¸€ç¯, æ‰€è°“è¿­ä»£å™¨æ¨¡å¼, ä»…ä»…æ˜¯è¿™ä¸€ç¯åœ¨é¢å‘å¯¹è±¡ä¸­çš„ä½“ç°.</p>
<h3 id="ğŸ‘½-ä¸­ä»‹è€…"><a href="#ğŸ‘½-ä¸­ä»‹è€…" class="headerlink" title="ğŸ‘½ ä¸­ä»‹è€…"></a>ğŸ‘½ ä¸­ä»‹è€…</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å…¸å‹æ¡ˆä¾‹æ˜¯, ä½ é€šè¿‡æ‰‹æœºç»™äººæ‰“ç”µè¯, ä½ å’Œå¯¹æ–¹çš„é€šè®¯å¹¶éç›´æ¥é€è¾¾çš„, è€Œæ˜¯éœ€è¦é€šè¿‡ä¸­é—´çš„ç½‘ç»œè¿è¥å•†. è¿™ä¸ªæ¡ˆä¾‹ä¸­, ç½‘ç»œè¿è¥å•†å°±æ˜¯ä¸­ä»‹è€….</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>ä¸­ä»‹è€…æ¨¡å¼å¢åŠ äº†ä¸€ä¸ªç¬¬ä¸‰æ–¹å¯¹è±¡(ä¸­ä»‹è€…)æ¥æ§åˆ¶ä¸¤ä¸ªå¯¹è±¡(åŒäº‹)é—´çš„äº¤äº’. æœ‰åŠ©äºå¯¹å½¼æ­¤é€šä¿¡çš„è§£è€¦, æ¯•ç«Ÿä»–ä»¬å¹¶ä¸éœ€è¦å…³å¿ƒå¯¹æ–¹çš„å®ç°ç»†èŠ‚.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In software engineering, the mediator pattern defines an object that encapsulates how a set of objects interact. This pattern is considered to be a behavioral pattern due to the way it can alter the programâ€™s running behavior.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;ctime&gt;</span><br><span class="line">#include &lt;iomanip&gt;</span><br><span class="line"></span><br><span class="line">class User;</span><br><span class="line"></span><br><span class="line">class IChatRoomMediator &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void ShowMessage(const User&amp; user, const std::string&amp; message) = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class ChatRoom : public IChatRoomMediator &#123;</span><br><span class="line">public:</span><br><span class="line">    void ShowMessage(const User&amp; user, const std::string&amp; message) override;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class User &#123;</span><br><span class="line">public:</span><br><span class="line">    User(const std::string&amp; name, IChatRoomMediator&amp; chatMediator): name_(name), chatMediator_(chatMediator) &#123;&#125;</span><br><span class="line">    const std::string&amp; GetName() const &#123; return name_; &#125;</span><br><span class="line">    void Send(const std::string&amp; message) &#123; chatMediator_.ShowMessage(*this, message); &#125;</span><br><span class="line">private:</span><br><span class="line">    std::string name_;</span><br><span class="line">    IChatRoomMediator&amp; chatMediator_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">void ChatRoom::ShowMessage(const User &amp;user, const std::string &amp;message) &#123;</span><br><span class="line">    std::time_t now = std::time(nullptr);</span><br><span class="line">    std::cout &lt;&lt; std::put_time(std::localtime(&amp;now), &quot;%Y-%m-%d %H:%M:%S&quot;) &lt;&lt; &quot;[&quot; &lt;&lt; user.GetName() &lt;&lt; &quot;]: &quot; &lt;&lt; message &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    ChatRoom mediator;</span><br><span class="line">    User john(&quot;John Doe&quot;, mediator);</span><br><span class="line">    User jane(&quot;Jane Doe&quot;, mediator);</span><br><span class="line">    john.Send(&quot;Hi, there!&quot;);</span><br><span class="line">    jane.Send(&quot;Hey!&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>ä¸­ä»‹è€…çš„æœ¬è´¨, ä¹Ÿæ˜¯å¯¹<strong>æ¶ˆæ¯åè®®çš„ä¸€ç§æŠ½è±¡</strong>, å¹¶åŒæ ·å€Ÿç”¨äº†<strong>å›è°ƒ</strong>çš„æ‰‹æ®µ. å¬èµ·æ¥å’Œ<a>å‘½ä»¤</a>æ¨¡å¼å¾ˆç±»ä¼¼, å…¶å®ä¹Ÿçš„ç¡®å¾ˆç±»ä¼¼. åŒºåˆ«ä»…åœ¨äºä¸šåŠ¡åœºæ™¯çš„é€‚åº”ä¸Š: å‘½ä»¤æ¨¡å¼é€‚ç”¨äº<strong>å¤šç§</strong>æ¶ˆæ¯åè®®, å¹¶å°†æ¯ä¸€ç§éƒ½å°è£…æˆå¯¹è±¡, æ˜¯ä¸€ç§å¹³é“ºå¼çš„æŠ½è±¡æ–¹å¼, ä½ é€šè¿‡å¤šç§å‘½ä»¤, æ¥å®ç°å¤šç§é€šè®¯; ä¸­ä»‹è€…æ¨¡å¼å‘¢, åˆ™å›ºå®šä¸º<strong>æŸä¸€ç§</strong>æ¶ˆæ¯åè®®, åŒäº‹ä¹‹é—´è¦éµå¾ªç›¸åŒçš„åè®®, æ‰å¯ä»¥åšåˆ°é€šè®¯. è€Œè¿™ä¸€ç§, å¯ä»¥é€šè¿‡ç»§æ‰¿æ¥å…·åŒ–, æ‰€ä»¥æ˜¯ä¸€ç§çºµæ·±å¼çš„æŠ½è±¡, ä½ å’Œå¯¹æ–¹é€šè®¯, å¯ä»¥æ˜¯ç”µè¯, é‚®ä»¶, å¾®ä¿¡ç­‰ç­‰, ä½†ä»–ä»¬æ‰®æ¼”çš„éƒ½æ˜¯ä¸­ä»‹è€…è¿™ä¸ªè§’è‰².</p>
<h3 id="ğŸ’¾-å¤‡å¿˜å½•"><a href="#ğŸ’¾-å¤‡å¿˜å½•" class="headerlink" title="ğŸ’¾ å¤‡å¿˜å½•"></a>ğŸ’¾ å¤‡å¿˜å½•</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>ä»¥è®¡ç®—å™¨(åŸå‘å™¨)ä¸ºä¾‹, å½“ä½ åšäº†ä¸€ç»„è¿ç®—å, æœ€åä¸€æ¬¡è®¡ç®—è¿‡ç¨‹ä¼šä¿å­˜åœ¨å†…å­˜(å¤‡å¿˜å½•)ä¸­. æ‰€ä»¥ä½ éšæ—¶å¯ä»¥é€šè¿‡æŸä¸ªæŒ‰é’®(è´Ÿè´£äºº)æ¥æ¢å¤è¯¥æ“ä½œ.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å¤‡å¿˜å½•æ¨¡å¼ä¼šæŠ“å–å¹¶å‚¨å­˜å¯¹è±¡çš„å½“å‰çŠ¶æ€, ä¹‹åå¯ä¾¿æ·çš„æ¢å¤å‡ºæ¥.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>The memento pattern is a software design pattern that provides the ability to restore an object to its previous state (undo via rollback).</p>
</blockquote>
<p>å½“ä½ éœ€è¦å¿«ç…§-æ¢å¤è¿™æ ·ç±»ä¼¼åŠŸèƒ½æ—¶, è¯¥æ¨¡å¼å°†ä¼šéå¸¸æœ‰ç”¨.</p>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;memory&gt;</span><br><span class="line"></span><br><span class="line">class EditorMemento &#123;</span><br><span class="line">public:</span><br><span class="line">    EditorMemento(const std::string&amp; content): content_(content) &#123;&#125;</span><br><span class="line">    const std::string&amp; GetContent() const &#123; return content_; &#125;</span><br><span class="line">private:</span><br><span class="line">    std::string content_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Editor &#123;</span><br><span class="line">    using MementoType = std::shared_ptr&lt;EditorMemento&gt;;</span><br><span class="line">public:</span><br><span class="line">    void Type(const std::string&amp; words) &#123; content_ += &quot; &quot; + words; &#125;</span><br><span class="line">    const std::string&amp; GetContent() const &#123; return content_; &#125;</span><br><span class="line">    MementoType Save() &#123; return std::make_shared&lt;EditorMemento&gt;(content_); &#125;</span><br><span class="line">    void Restore(MementoType memento) &#123; content_ = memento-&gt;GetContent(); &#125;</span><br><span class="line">private:</span><br><span class="line">    std::string content_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Editor editor;</span><br><span class="line">    //! Type some stuff</span><br><span class="line">    editor.Type(&quot;This is the first sentence.&quot;);</span><br><span class="line">    editor.Type(&quot;This is second.&quot;);</span><br><span class="line">    //! Save the state to restore to : This is the first sentence. This is second.</span><br><span class="line">    auto saved = editor.Save();</span><br><span class="line">    //! Type some more</span><br><span class="line">    editor.Type(&quot;And this is third.&quot;);</span><br><span class="line">    std::cout &lt;&lt; editor.GetContent() &lt;&lt; std::endl;</span><br><span class="line">    editor.Restore(saved);</span><br><span class="line">    std::cout &lt;&lt; editor.GetContent() &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>å¤‡å¿˜å½•æ¨¡å¼, è¯´ç™½äº†å°±æ˜¯å¯¹<strong>ç¼“å­˜</strong>è¿™ä¸ªè¡Œä¸ºçš„å¯¹è±¡åŒ–. æˆ‘ä»¬é€šå¸¸æƒ³ç¼“å­˜ä¸€ä¸ªçŠ¶æ€, ä¼šæŠŠè¿™ä¸ªçŠ¶æ€å­˜åˆ°å®¹å™¨ä¸­(å¦‚å“ˆå¸Œè¡¨, mapç­‰), å¹¶ç”¨æŸä¸ª key (å¦‚æ—¶é—´æˆ³) æ¥æ ‡å®š. ä½†å½“ä½ è¦å®ç°çš„, æ˜¯ä¸€ä¸ªé¢‡å…·è§„æ¨¡, å¤šç§çŠ¶æ€ç¼“å­˜, ä»¥åŠå„ç§â€å­˜-å–â€ç©¿æ’çš„æ—¶å€™, å°†çŠ¶æ€æŠ½è±¡æˆä¸€ä¸ªå¯¹è±¡, å°±æ˜¾å¾—ååˆ†å¿…è¦äº†. ç£¨åˆ€ä¸è¯¯ç æŸ´å·¥, åœ¨ç‰¹å®šçš„åœºæ™¯ä¸‹, è¯¥æ¨¡å¼ä¸æ˜¯æ²¡äº‹æ‰¾äº‹, è€Œæ˜¯çœŸçš„ä¼šç®€åŒ–ä¸šåŠ¡é€»è¾‘.</p>
<h3 id="ğŸ˜-è§‚å¯Ÿè€…"><a href="#ğŸ˜-è§‚å¯Ÿè€…" class="headerlink" title="ğŸ˜ è§‚å¯Ÿè€…"></a>ğŸ˜ è§‚å¯Ÿè€…</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>ä¸€ä¸ªå¥½ä¾‹å­: æ±‚èŒè€…è®¢é˜…äº†æŸèŒä½å‘å¸ƒç½‘ç«™, å½“æœ‰ä½•æ—¶çš„èŒä½å‡ºç°æ—¶, ä»–ä»¬ä¼šæ”¶åˆ°é€šçŸ¥.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å®šä¹‰å¯¹è±¡é—´çš„ä¾èµ–å…³ç³», ä»¥è‡³äºä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€æ”¹å˜, ä¾èµ–å®ƒçš„å¯¹è±¡ä»¬éƒ½ä¼šæ”¶åˆ°é€šçŸ¥.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>The observer pattern is a software design pattern in which an object, called the subject, maintains a list of its dependents, called observers, and notifies them automatically of any state changes, usually by calling one of their methods.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;functional&gt;</span><br><span class="line"></span><br><span class="line">class JobPost &#123;</span><br><span class="line">public:</span><br><span class="line">    JobPost(const std::string&amp; title): title_(title) &#123;&#125;</span><br><span class="line">    const std::string&amp; GetTitle() const &#123; return title_; &#125;</span><br><span class="line">private:</span><br><span class="line">    std::string title_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class IObserver &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void OnJobPosted(const JobPost&amp; job) = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class JobSeeker : public IObserver &#123;</span><br><span class="line">public:</span><br><span class="line">    JobSeeker(const std::string&amp; name): name_(name) &#123;&#125;</span><br><span class="line">    void OnJobPosted(const JobPost &amp;job) override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;Hi &quot; &lt;&lt; name_ &lt;&lt; &quot;! New job posted: &quot; &lt;&lt; job.GetTitle() &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    std::string name_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class IObservable &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void Attach(IObserver&amp; observer) = 0;</span><br><span class="line">    virtual void AddJob(const JobPost&amp; jobPosting) = 0;</span><br><span class="line">protected:</span><br><span class="line">    virtual void Notify(const JobPost&amp; jobPosting) = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class JobPostings : public IObservable &#123;</span><br><span class="line">public:</span><br><span class="line">    void Attach(IObserver&amp; observer) override &#123;</span><br><span class="line">        observers_.push_back(observer);</span><br><span class="line">    &#125;</span><br><span class="line">    void AddJob(const JobPost &amp;jobPosting) override &#123;</span><br><span class="line">        Notify(jobPosting);</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    void Notify(const JobPost &amp;jobPosting) override &#123;</span><br><span class="line">        for (IObserver&amp; observer : observers_)</span><br><span class="line">            observer.OnJobPosted(jobPosting);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    std::vector&lt;std::reference_wrapper&lt;IObserver&gt;&gt; observers_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    JobSeeker johnDoe(&quot;John Doe&quot;);</span><br><span class="line">    JobSeeker janeDoe(&quot;Jane Doe&quot;);</span><br><span class="line"></span><br><span class="line">    JobPostings jobPostings;</span><br><span class="line">    jobPostings.Attach(johnDoe);</span><br><span class="line">    jobPostings.Attach(janeDoe);</span><br><span class="line"></span><br><span class="line">    jobPostings.AddJob(JobPost(&quot;Software Engineer&quot;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>åˆè¢«ç§°ä¸ºå‘å¸ƒ-è®¢é˜…æ¨¡å¼. ä½†æ— è®ºå«ä»€ä¹ˆ, å…¶å®æœ¬è´¨éƒ½æ˜¯<strong>æ³¨å…¥+å›è°ƒ</strong>. è®¢é˜…æ˜¯æ³¨å…¥çš„æ—¶æœº, å‘å¸ƒæ˜¯å›è°ƒçš„æ—¶æœº. è§‚å¯Ÿæ˜¯æ³¨å…¥çš„æ—¶æœº, é€šçŸ¥æ˜¯å›è°ƒçš„æ—¶æœº. åœ¨å®è·µä¸­, é€šå¸¸ä¼šç»´æŠ¤ä¸€ä¸ªè®¢é˜…åˆ—è¡¨, æœ‰ç‚¹ç±»ä¼¼é‚®ä»¶åˆ—è¡¨. å‘å¸ƒé€šçŸ¥æ—¶, ä¼šè¿­ä»£æ¯ä¸€ä¸ªæ³¨å…¥å¯¹è±¡, å¹¶æ‰§è¡Œå›è°ƒ.</p>
<h3 id="ğŸƒ-è®¿é—®è€…"><a href="#ğŸƒ-è®¿é—®è€…" class="headerlink" title="ğŸƒ è®¿é—®è€…"></a>ğŸƒ è®¿é—®è€…</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å‡è®¾æœ‰äººè¦å»è¿ªæ‹œ, ä»–åªéœ€è¦ä¸€ç§æ–¹å¼(ä¾‹å¦‚ç­¾è¯)è¿›å…¥è¿ªæ‹œ. åˆ°äº†ä¹‹å, å°±å¯ä»¥å»è®¿é—®è¿ªæ‹œçš„ä»»ä½•åœ°æ–¹, è€Œç”¨ä¸ç€é¢å¤–ç”³è¯·è®¸å¯, æˆ–æ˜¯åšä¸€äº›æ³•å¾‹äº‹å®œ. åªéœ€è¦è®©ä»–çŸ¥é“ä¸€ä¸ªåœ°æ–¹, ä»–å°±å¯ä»¥å»è®¿é—®äº†. è®¿é—®è€…æ¨¡å¼å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹, å®ƒå¸®åŠ©ä½ æ·»åŠ åœ°ç‚¹, ä»¥ä¾¿ä½ æ— éœ€é¢å¤–å·¥ä½œå°±å¯ä»¥å°½å¯èƒ½çš„è®¿é—®æ›´å¤šåœ°æ–¹.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>è®¿é—®è€…æ¨¡å¼å…è®¸ä½ ä¸ºå¯¹è±¡ä»¬å¢åŠ æ›´å¤šçš„æ“ä½œ, å´ä¸å¿…ä¿®æ”¹å®ƒä»¬.</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In object-oriented programming and software engineering, the visitor design pattern is a way of separating an algorithm from an object structure on which it operates. A practical result of this separation is the ability to add new operations to existing object structures without modifying those structures. It is one way to follow the open/closed principle.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class AnimalOperation;</span><br><span class="line"></span><br><span class="line">// visitee</span><br><span class="line">class Animal &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void Accept(AnimalOperation&amp; operation) = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Monkey;</span><br><span class="line">class Lion;</span><br><span class="line">class Dolphin;</span><br><span class="line"></span><br><span class="line">// visitor</span><br><span class="line">class AnimalOperation &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void visitMonkey(Monkey&amp; monkey) = 0;</span><br><span class="line">    virtual void visitLion(Lion&amp; lion) = 0;</span><br><span class="line">    virtual void visitDolphin(Dolphin&amp; dolphin) = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Monkey : public Animal &#123;</span><br><span class="line">public:</span><br><span class="line">    void Shout() &#123; std::cout &lt;&lt; &quot;Ooh oo aa aa!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Accept(AnimalOperation&amp; operation) override &#123; operation.visitMonkey(*this); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Lion : public Animal &#123;</span><br><span class="line">public:</span><br><span class="line">    void Roar() &#123; std::cout &lt;&lt; &quot;Roaaar!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Accept(AnimalOperation&amp; operation) override &#123; operation.visitLion(*this); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Dolphin : public Animal &#123;</span><br><span class="line">public:</span><br><span class="line">    void Speak() &#123; std::cout &lt;&lt; &quot;Tuut tuttu tuutt!&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Accept(AnimalOperation&amp; operation) override &#123; operation.visitDolphin(*this); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Speak : public AnimalOperation &#123;</span><br><span class="line">public:</span><br><span class="line">    void visitMonkey(Monkey&amp; monkey) override &#123; monkey.Shout(); &#125;</span><br><span class="line">    void visitLion(Lion&amp; lion) override &#123; lion.Roar(); &#125;</span><br><span class="line">    void visitDolphin(Dolphin&amp; dolphin) override &#123; dolphin.Speak(); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    Monkey monkey;</span><br><span class="line">    Lion lion;</span><br><span class="line">    Dolphin dolphin;</span><br><span class="line"></span><br><span class="line">    Speak speak;</span><br><span class="line">    monkey.Accept(speak);</span><br><span class="line">    lion.Accept(speak);</span><br><span class="line">    dolphin.Accept(speak);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>å…¶å®æœ¬è´¨ä¾ç„¶æ˜¯<strong>æ³¨å…¥-å›è°ƒ</strong>æ¨¡å¼. ç­¾è¯æ˜¯ä¸€ç§æ³¨å…¥, å…è®¸ä½ å›è°ƒ <code>visit</code>; å‘Šè¯‰åœ°ç‚¹æ˜¯ä¸€ç§æ³¨å…¥, å…è®¸å»å…·ä½“åœ°ç‚¹å›è°ƒ <code>visit</code>. ä»ç¤ºä¾‹ä»£ç çœ‹, ä¹Ÿèƒ½çœ‹å‡ºä¸¤å±‚æ³¨å…¥å›è°ƒçš„æ„æ€: é¦–å…ˆæ˜¯é’ˆå¯¹<strong>æ¥å£</strong>çš„æ³¨å…¥å›è°ƒ, é€šè¿‡ <code>Accept</code> æ³¨å…¥åŠ¨ç‰©è¡Œä¸º, ç„¶åå›è°ƒå„ä¸ª <code>visit</code> æ–¹æ³•, åœ¨å›è°ƒçš„åŒæ—¶, åˆå°†è‡ªèº«æ³¨å…¥(æ­¤åˆ»å·²ç»æ˜¯é’ˆå¯¹<strong>å…·ä½“</strong>å¯¹è±¡äº†), ç„¶åå†å›è°ƒå…·ä½“çš„åŠ¨ç‰©è¡Œä¸ºæ–¹æ³•.</p>
<p>ä¸ºä»€ä¹ˆè¦è¿™æ ·ç»•æ¥ç»•å», æ¥æ¥å›å›çš„å‘¢? é‚£æ˜¯å› ä¸ºè®¿é—®è€…æ˜¯ä¸€ç§<strong>ç»´æŠ¤</strong>æ¨¡å¼. è¯•æƒ³, æ—¢æœ‰ä»£ç å·²ç»å­˜åœ¨ Animal å’Œå…¶ä¸‰ä¸ªæ´¾ç”Ÿç±»äº†, ä»¥åŠå„è‡ªåšå«çš„æ–¹æ³•. ç°åœ¨æˆ‘æƒ³ç”¨ä¸€ä¸ª<strong>ç»Ÿä¸€çš„æ¥å£, å»è¿­ä»£çš„è°ƒç”¨è¿™äº›æ–¹æ³•</strong>(å‡æƒ³ä¸‰ä¸ªå¯¹è±¡éƒ½åœ¨ä¸€ä¸ª vector ä¸­, ä½ è¿­ä»£çš„æ—¶å€™æ— æ³•ç”¨å„è‡ªä¸åŒçš„æ¥å£). é‚£ä¹ˆå°±éœ€è¦è®¿é—®è€…ä¸Šåœºäº†. é¦–å…ˆåœ¨ Animal ç±»ä¸­å¢åŠ æ¥å£ <code>Accept</code>, ç•™å‡ºæ³¨å…¥çš„å£å­. ç„¶åæ´¾ç”Ÿç±»é‡å†™è¯¥æ¥å£, å¹¶å€Ÿæ­¤å°†è‡ªèº«æ³¨å…¥. æœ€åå°†è¿™äº›æ–¹æ³•æŠ½è±¡æˆä¸€ä¸ªæ¥å£ç±», å¹¶å¢åŠ ç›¸åº”çš„ <code>visit</code> æ–¹æ³•. æ´¾ç”Ÿè¯¥æ¥å£ç±», å°†å…·ä½“çš„æ–¹æ³•ä¸€ä¸€ç»‘å®š(å°±æ˜¯åœ¨ç»‘å®šå›è°ƒ). ç„¶åæˆ‘ä»¬ä¸€æ—¦è°ƒç”¨ <code>Accept</code>, å„è‡ªåšå«çš„æ–¹æ³•å°±ä¼šè‡ªç„¶è¢«å›è°ƒåˆ°äº†.</p>
<p>ç»¼ä¸Š, è®¿é—®è€…æ¨¡å¼, æ˜¯ä¸€ç§å¯¹<strong>è°ƒç”¨</strong>çš„æŠ½è±¡, ä¾é <strong>å›è°ƒ</strong>æ¥å®ç°.</p>
<h3 id="ğŸ’¡-ç­–ç•¥"><a href="#ğŸ’¡-ç­–ç•¥" class="headerlink" title="ğŸ’¡ ç­–ç•¥"></a>ğŸ’¡ ç­–ç•¥</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>ä»¥æ’åºç®—æ³•ä¸ºä¾‹, æœ€åˆæˆ‘ä»¬é‡‡ç”¨å†’æ³¡æ’åº, ä½†éšç€æ•°æ®æ•°é‡çš„å¢é•¿, å†’æ³¡æ’åºè¶Šæ¥è¶Šæ…¢. ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜, æˆ‘ä»¬æ”¹ç”¨å¿«é€Ÿæ’åº. ä½†è™½ç„¶å¯¹äºå¤§å‹æ•°æ®é›†æ¥è¯´æ•ˆæœå¥½äº†èµ·æ¥, ä½†å¯¹äºæ¯”è¾ƒå°çš„æ•°æ®é›†è€Œè¨€, å´ç›¸å½“æ…¢. ä¸ºäº†å¤„ç†è¿™æ ·ä¸€ä¸ªä¸¤éš¾, æˆ‘ä»¬é‡‡å–äº†ä¸€ä¸ªç­–ç•¥: å¯¹äºå°å‹æ•°æ®é›†, é‡‡ç”¨å†’æ³¡æ’åº; å¯¹äºè¾ƒå¤§ä¸€äº›çš„, é‡‡ç”¨å¿«é€Ÿæ’åº.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>ç­–ç•¥æ¨¡å¼å…è®¸ä½ æ ¹æ®å®é™…æƒ…å†µåˆ‡æ¢ç®—æ³•æˆ–ç­–ç•¥.</p>
</blockquote>
<p>Wikipadia:</p>
<blockquote>
<p>In computer programming, the strategy pattern (also known as the policy pattern) is a behavioural software design pattern that enables an algorithmâ€™s behavior to be selected at runtime.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;vector&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;functional&gt;</span><br><span class="line">#include &lt;memory&gt;</span><br><span class="line"></span><br><span class="line">class ISortStrategy &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void Sort(std::vector&lt;int&gt;&amp; vec) = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class BubbleSortStrategy : public ISortStrategy &#123;</span><br><span class="line">public:</span><br><span class="line">    void Sort(std::vector&lt;int&gt;&amp; vec) override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;Sorting using bubble sort&quot; &lt;&lt; std::endl;</span><br><span class="line">        _BubbleSort(vec);</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    void _BubbleSort(std::vector&lt;int&gt;&amp; vec) &#123;</span><br><span class="line">        using size = std::vector&lt;int&gt;::size_type;</span><br><span class="line">        for (size i = 0; i != vec.size(); ++i)</span><br><span class="line">            for (size j = 0; j != vec.size()-1; ++j)</span><br><span class="line">                if (vec[j] &gt; vec[j+1])</span><br><span class="line">                    std::swap(vec[j], vec[j+1]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class QuickSortStrategy : public ISortStrategy &#123;</span><br><span class="line">public:</span><br><span class="line">    void Sort(std::vector&lt;int&gt;&amp; vec) override &#123;</span><br><span class="line">        std::cout &lt;&lt; &quot;Sorting using quick sort&quot; &lt;&lt; std::endl;</span><br><span class="line">        _QuickSort(vec);</span><br><span class="line">    &#125;</span><br><span class="line">private:</span><br><span class="line">    void _QuickSort(std::vector&lt;int&gt;&amp; vec) &#123;</span><br><span class="line">        using size = std::vector&lt;int&gt;::size_type;</span><br><span class="line">        auto partition = [&amp;vec](size low, size high) &#123;</span><br><span class="line">            int pivot = vec[high];</span><br><span class="line">            size i = low;</span><br><span class="line">            for (size j = low; j != high; ++j)</span><br><span class="line">                if (vec[j] &lt;= pivot)</span><br><span class="line">                    std::swap(vec[i++], vec[j]);</span><br><span class="line">            std::swap(vec[i], vec[high]);</span><br><span class="line">            return i;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        std::function&lt;void (size, size)&gt; quickSort = [&amp;](size low, size high) &#123;</span><br><span class="line">            if (low &gt;= high) return;</span><br><span class="line">            size pi = partition(low, high);</span><br><span class="line">            quickSort(low, pi - 1);</span><br><span class="line">            quickSort(pi + 1, high);</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        quickSort(0, vec.size()-1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Sorter &#123;</span><br><span class="line">public:</span><br><span class="line">    static void Sort(std::vector&lt;int&gt;&amp; vec, const std::shared_ptr&lt;ISortStrategy&gt;&amp; sorter) &#123; sorter-&gt;Sort(vec); &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    std::vector&lt;int&gt; vec&#123;1, 5, 4, 3, 2, 8&#125;;</span><br><span class="line"></span><br><span class="line">    Sorter::Sort(vec, std::make_shared&lt;BubbleSortStrategy&gt;());</span><br><span class="line">    for (int i : vec) std::cout &lt;&lt; i &lt;&lt; &quot; &quot;;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">    Sorter::Sort(vec, std::make_shared&lt;QuickSortStrategy&gt;());</span><br><span class="line">    for (int i : vec) std::cout &lt;&lt; i &lt;&lt; &quot; &quot;;</span><br><span class="line">    std::cout &lt;&lt; std::endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>ç­–ç•¥æ¨¡å¼çš„æœ¬è´¨ä¾ç„¶æ˜¯<strong>æ³¨å…¥+å¤šæ€</strong>, å°†æ¥å£æ³¨å…¥, è°ƒç”¨ç›¸åº”æ–¹æ³•(ç®—æ³•æˆ–ç­–ç•¥)æ—¶, å†æ ¹æ®å¤šæ€çš„ç‰¹æ€§æ¥é€‰æ‹©å…·ä½“å®ç°.</p>
<h3 id="ğŸ’¢-çŠ¶æ€"><a href="#ğŸ’¢-çŠ¶æ€" class="headerlink" title="ğŸ’¢ çŠ¶æ€"></a>ğŸ’¢ çŠ¶æ€</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å‡è®¾ä½ æ­£åœ¨ä½¿ç”¨â€ç”»å›¾â€ç¨‹åº, é€‰æ‹©äº†ç”»ç¬”å·¥å…·æ¥è¿›è¡Œç»˜åˆ¶. ç”»åˆ·ä¼šæ ¹æ®ä½ é€‰æ‹©çš„é¢œè‰²è€Œæ”¹å˜å…¶è¡Œä¸º: è­¬å¦‚ä½ é€‰æ‹©äº†çº¢è‰², å®ƒä¾¿ä¼šç”¨çº¢è‰²æ¥ç»˜åˆ¶; å¦‚æœé€‰æ‹©äº†è“è‰², å®ƒå°†æˆä¸ºè“è‰².</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>å®ƒè®©ä½ åœ¨çŠ¶æ€æ”¹å˜çš„åŒæ—¶, ä¹Ÿæ”¹å˜ç±»çš„è¡Œä¸º</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>The state pattern is a behavioral software design pattern that implements a state machine in an object-oriented way. With the state pattern, a state machine is implemented by implementing each individual state as a derived class of the state pattern interface, and implementing state transitions by invoking methods defined by the patternâ€™s superclass. The state pattern can be interpreted as a strategy pattern which is able to switch the current strategy through invocations of methods defined in the patternâ€™s interface.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<p>ä»¥ä¸€ä¸ªæ–‡å­—å¤„ç†ç¨‹åºä¸ºä¾‹, é‚£äº›æ•²ä¸Šå»çš„å­—, ä½ å¯ä»¥æ”¹å˜å®ƒä»¬çš„çŠ¶æ€. ä¾‹å¦‚, ä½ é€‰æ‹©äº†åŠ ç²—, åç»­çš„å­—éƒ½ä¼šæ˜¯ç²—çš„, åŒæ ·çš„, é€‰æ‹©äº†æ–œä½“, åç»­éƒ½ä¼šæ˜¯æ–œä½“.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line">#include &lt;string&gt;</span><br><span class="line">#include &lt;algorithm&gt;</span><br><span class="line">#include &lt;memory&gt;</span><br><span class="line"></span><br><span class="line">class IWritingState &#123;</span><br><span class="line">public:</span><br><span class="line">    virtual void Write(std::string words) = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class UpperCase : public IWritingState &#123;</span><br><span class="line">    void Write(std::string words) override &#123;</span><br><span class="line">        std::transform(words.begin(), words.end(), words.begin(), ::toupper);</span><br><span class="line">        std::cout &lt;&lt; words &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class LowerCase : public IWritingState &#123;</span><br><span class="line">    void Write(std::string words) override &#123;</span><br><span class="line">        std::transform(words.begin(), words.end(), words.begin(), ::tolower);</span><br><span class="line">        std::cout &lt;&lt; words &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class Default : public IWritingState &#123;</span><br><span class="line">    void Write(std::string words) override &#123; std::cout &lt;&lt; words &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class TextEditor &#123;</span><br><span class="line">public:</span><br><span class="line">    TextEditor(const std::shared_ptr&lt;IWritingState&gt;&amp; state): state_(state) &#123;&#125;</span><br><span class="line">    void SetState(const std::shared_ptr&lt;IWritingState&gt;&amp; state) &#123; state_ = state; &#125;</span><br><span class="line">    void Type(std::string words) &#123; state_-&gt;Write(words); &#125;</span><br><span class="line">private:</span><br><span class="line">    std::shared_ptr&lt;IWritingState&gt; state_;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">  TextEditor editor(std::make_shared&lt;Default&gt;());</span><br><span class="line">  editor.Type(&quot;First line&quot;);</span><br><span class="line"></span><br><span class="line">  editor.SetState(std::make_shared&lt;UpperCase&gt;());</span><br><span class="line">  editor.Type(&quot;Second line&quot;);</span><br><span class="line">  editor.Type(&quot;Third line&quot;);</span><br><span class="line"></span><br><span class="line">  editor.SetState(std::make_shared&lt;LowerCase&gt;());</span><br><span class="line">  editor.Type(&quot;Fourth line&quot;);</span><br><span class="line">  editor.Type(&quot;Fifth line&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>çŠ¶æ€æ¨¡å¼çš„æœ¬è´¨ä¾ç„¶æ˜¯<strong>æ³¨å…¥+å¤šæ€</strong>, è¿™å’Œ<a>ç­–ç•¥</a>å¦‚å‡ºä¸€è¾™. å®é™…ä¸Šåœ¨å®è·µä¸­, è¿™ä¿©æ¨¡å¼å‡ ä¹ä¸€æ ·. åªæœ‰ä¸€äº›å¾®å°çš„å·®åˆ«:</p>
<ol>
<li>çŠ¶æ€æ¨¡å¼é€šå¸¸ä¼šç¼“å­˜å½“å‰çŠ¶æ€, ä½ å¯ä»¥é€šè¿‡ <code>get</code> æ–¹æ³•å–å¾—çŠ¶æ€, ä½†ç­–ç•¥æ¨¡å¼é€šå¸¸ä¸æä¾› <code>get</code> æ–¹æ³•.</li>
<li>çŠ¶æ€æ¨¡å¼ä¼šæä¾› <code>set</code> æ–¹æ³•æ›¿æ¢çŠ¶æ€, ä½†ç­–ç•¥æ¨¡å¼é€šå¸¸ä¸æä¾› <code>set</code> æ–¹æ³•.(è™½ç„¶å¯ä»¥ç”¨ assign constructor èµ·åˆ°åŒæ ·æ•ˆæœ)</li>
<li>ç­–ç•¥å¯¹è±¡é€šå¸¸ä½œä¸ºå‚æ•°ä¼ é€’ç»™å½“å‰å¯¹è±¡, è€ŒçŠ¶æ€é€šå¸¸ç”±å½“å‰å¯¹è±¡æ‰€åˆ›å»º.</li>
<li>ç­–ç•¥æ˜¯é’ˆå¯¹ç‰¹å®šæ–¹æ³•çš„, è€ŒçŠ¶æ€å´æ˜¯é’ˆå¯¹æ•´ä¸ªå¯¹è±¡çš„.</li>
</ol>
<p>è¯¦è§<a href="https://stackoverflow.com/questions/1658192/what-is-the-difference-between-strategy-design-pattern-and-state-design-pattern" target="_blank" rel="noopener">https://stackoverflow.com/queâ€¦</a></p>
<p>æ€»ä½“æ¥è®², çŠ¶æ€æ›´åƒæ˜¯ä¸€ç»„ç­–ç•¥çš„é›†åˆ. æ”¹å˜å¯¹è±¡çŠ¶æ€, ä¼šè®©å¯¹è±¡çš„å„ç§æ–¹æ³•éƒ½æœ‰æ”¹å˜. è€Œç­–ç•¥å¾€å¾€åªæ˜¯é’ˆå¯¹æŸç‰¹å®šç®—æ³•çš„.</p>
<h3 id="ğŸ“’-æ¨¡æ¿æ–¹æ³•"><a href="#ğŸ“’-æ¨¡æ¿æ–¹æ³•" class="headerlink" title="ğŸ“’ æ¨¡æ¿æ–¹æ³•"></a>ğŸ“’ æ¨¡æ¿æ–¹æ³•</h3><p>çœŸå®æ¡ˆä¾‹:</p>
<blockquote>
<p>å‡è®¾æˆ‘ä»¬æ­£åœ¨é€ æˆ¿å­, å…¶æ­¥éª¤çœ‹èµ·æ¥å¯èƒ½å¦‚ä¸‹æ‰€ç¤º:</p>
<ol>
<li>å»ºé€ åœ°åŸº</li>
<li>ç Œå¢™</li>
<li>å»ºé€ å±‹é¡¶</li>
<li>éš”å‡ºæ¥¼å±‚</li>
</ol>
<p>è¿™äº›æ­¥éª¤çš„é¡ºåºæ˜¯å›ºå®šçš„, å³åœ¨ç Œå¢™ä¹‹å‰ä¸èƒ½å»ºé€ å±‹é¡¶, ä½†æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥ä¿®æ”¹å®Œå–„, è­¬å¦‚ç Œå¢™ä¹Ÿå¯ä»¥ç”±æœ¨å¤´æˆ–èšé…¯, çŸ³å¤´æ¥æ›¿ä»£.</p>
</blockquote>
<p>ç®€è¨€ä¹‹:</p>
<blockquote>
<p>æ¨¡æ¿æ–¹æ³•å®šä¹‰äº†å¦‚ä½•æ‰§è¡ŒæŸç§ç®—æ³•çš„æ¡†æ¶, ä½†å°†å…·ä½“å®ç°å»¶è¿Ÿåˆ°å­ç±».</p>
</blockquote>
<p>Wikipedia:</p>
<blockquote>
<p>In software engineering, the template method pattern is a behavioral design pattern that defines the program skeleton of an algorithm in an operation, deferring some steps to subclasses. It lets one redefine certain steps of an algorithm without changing the algorithmâ€™s structure.</p>
</blockquote>
<p><strong>ç¤ºä¾‹ä»£ç </strong>:</p>
<p>å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ„å»ºå·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬æµ‹è¯•, æ£€æŸ¥, æ„å»º, ç”Ÿæˆæ„å»ºæŠ¥å‘Š(å³ä»£ç è¦†ç›–æŠ¥å‘Š, æ£€æŸ¥ç»“æœæŠ¥å‘Šç­‰), å¹¶å°†æˆ‘ä»¬çš„åº”ç”¨éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨ä¸Š.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;iostream&gt;</span><br><span class="line"></span><br><span class="line">class Builder &#123;</span><br><span class="line">public:</span><br><span class="line">    void Build() &#123;</span><br><span class="line">        Test();</span><br><span class="line">        Lint();</span><br><span class="line">        Assemble();</span><br><span class="line">        Deploy();</span><br><span class="line">    &#125;</span><br><span class="line">protected:</span><br><span class="line">    virtual void Test() = 0;</span><br><span class="line">    virtual void Lint() = 0;</span><br><span class="line">    virtual void Assemble() = 0;</span><br><span class="line">    virtual void Deploy() = 0;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class AndroidBuilder : public Builder &#123;</span><br><span class="line">    void Test() override &#123; std::cout &lt;&lt; &quot;Running android tests&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Lint() override &#123; std::cout &lt;&lt; &quot;Linting the android code&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Assemble() override &#123; std::cout &lt;&lt; &quot;Assembling the android build&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Deploy() override &#123; std::cout &lt;&lt; &quot;Deploying android build to server&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">class IosBuilder : public Builder &#123;</span><br><span class="line">    void Test() override &#123; std::cout &lt;&lt; &quot;Running ios tests&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Lint() override &#123; std::cout &lt;&lt; &quot;Linting the ios code&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Assemble() override &#123; std::cout &lt;&lt; &quot;Assembling the ios build&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">    void Deploy() override &#123; std::cout &lt;&lt; &quot;Deploying ios build to server&quot; &lt;&lt; std::endl; &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">    AndroidBuilder androidBuilder;</span><br><span class="line">    androidBuilder.Build();</span><br><span class="line"></span><br><span class="line">    IosBuilder iosBuilder;</span><br><span class="line">    iosBuilder.Build();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>æœ¬è´¨</strong>:</p>
<p>æ¨¡æ¿æ–¹æ³•åŸºæœ¬å°±æ˜¯<strong>å¤šæ€</strong>çš„é›†ä¸­ä½“ç°. åªä¸è¿‡å°†æ‰€æœ‰å¤šæ€æ–¹æ³•é›†ä¸­åˆ°ä¸€ä¸ªå…¬å…±æ¥å£ä¸­. ä¸è¿‡æ¨¡æ¿æ–¹æ³•çš„æ ¸å¿ƒæ˜¯, é€šè¿‡è¿™ä¸ªç»Ÿä¸€æ¥å£, ç¡®å®šå„ä¸ªå…·ä½“æ¥å£æ–¹æ³•çš„é¡ºåº, ä»¥ç¡®ç«‹è°ƒç”¨ç»“æ„. å­ç±»å„è‡ªå®ç°å…·ä½“ç»†èŠ‚, ä½†è¡Œä¸º, ç»“æ„ä¾æ—§ä¿æŒä¸€è‡´. è¿™å°±å¥½æ¯”â€C++ æ ‡å‡†â€è§„å®šäº†è¯­è¨€çš„è¡Œä¸º, å„å®¶ç¼–è¯‘å™¨å»å„è‡ªå®ç°. è€Œæœ€ç»ˆ, åªè¦ä½ çš„ä»£ç éµå¾ª C++ æ ‡å‡†, åŸåˆ™ä¸Šåº”è¯¥å¯ä»¥åœ¨å„ç§ç¼–è¯‘å™¨ä¸Šå¾—åˆ°ä¸€è‡´çš„ç»“æœ.</p>
<h2 id="æœ€åçš„è¯"><a href="#æœ€åçš„è¯" class="headerlink" title="æœ€åçš„è¯"></a>æœ€åçš„è¯</h2><p>è¿™ç¯‡ç¬”è®°, æˆ–ç§°ä¹‹ä¸ºç¿»è¯‘, æ–­æ–­ç»­ç»­å†™å®Œ, ç«Ÿç„¶èŠ±äº†åŠä¸ªæœˆçš„æ—¶é—´(ä¸šä½™æ—¶é—´). ä½†è¿™æ˜¯æˆ‘å¯¹äºç½‘ç»œä¸Šçƒ­é—¨èµ„æºçš„ä¸€æ¬¡ç²¾è¯»è¯•éªŒ. æ¯•ç«Ÿæœ‰å¤ªå¤šçš„èµ„æº, è¢« star æˆ–æ”¶è—ä»¥åå°±è¢«å¿˜ä¹‹è„‘å, å¹¶å°†ç§¯ç°å¤šå¹´.</p>
<p>çªç„¶æƒ³é‡è¯»è®¾è®¡æ¨¡å¼, æºäºæˆ‘æƒ³é‡æ„<a href="https://github.com/pezy/imgproc" target="_blank" rel="noopener">imgproc</a>, å¯¹äºåŸä½œè€…æ‰€ä½¿ç”¨çš„<a href="https://github.com/pezy/imgproc/issues/1" target="_blank" rel="noopener">å·¥å‚æ–¹æ³•å®ç°</a>ä¸­, æœ‰ä¸€å¤§æ®µ switch è¯­å¥, çœ‹ç€ç”šæ˜¯ç¢çœ¼. è¯•æƒ³æœªæ¥æˆ‘è¯•éªŒ OpenCV ç®—æ³•, ä¼šä¸æ–­åŠ å…¥æ›´å¤šçš„ç®—æ³•, æ¯ä¸€æ¬¡éƒ½éœ€è¦åœ¨å¤šä¸ªåœ°æ–¹å¢åŠ ä¸åŒçš„ä»£ç , æƒ³æƒ³å°±å¤´ç–¼, è‡ªå·±ç»´æŠ¤éƒ½å«Œéº»çƒ¦. è¿™æ‰æƒ³åˆ°å»äº†è§£ä¸€ä¸‹é€šè¿‡ C++ è¯­è¨€, å¯ä»¥æ€æ ·æ›´ä¼˜é›…çš„å®ç°å·¥å‚æ–¹æ³•.</p>
<p>åœ¨äº†è§£è¿‡ç¨‹ä¸­, åˆå¯¹è‡ªå·±æ˜¯å¦çœŸæ­£ç†è§£äº†å‡ ä¸ªå·¥å‚äº§ç”Ÿäº†æ€€ç–‘, äºæ˜¯æ‰¾åˆ°äº†è¿™ç¯‡ star è¿‡ä¸‡çš„çƒ­æ–‡.</p>
<p>å®é™…ä¸Š, è¿™ç¯‡æ–‡ç« ä»‹ç»çš„ 23 ç§è®¾è®¡æ¨¡å¼, ä¸<a href="https://book.douban.com/subject/1052241/" target="_blank" rel="noopener">å››äººå¸®é‚£æœ¬ä¹¦</a>å®Œå…¨å¯¹åº”. å”¯ä¸€ä¸åŒåœ¨äºè¡Œä¸ºå‹è®¾è®¡æ¨¡å¼é‚£é‡Œ, é¡ºåºä¸å¤ªä¸€è‡´. æ‰€ä»¥ä½ ä¹Ÿå¯ä»¥æŠŠè¿™ç¯‡æ–‡ç« è§†ä¸ºâ€ç²¾ç®€ç‰ˆâ€ çš„&lt;è®¾è®¡æ¨¡å¼ - å¯å¤ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„åŸºç¡€&gt;.</p>
<p>ä½†åœ¨ç²¾è¯»çš„è¿‡ç¨‹ä¸­, è¿˜æ˜¯å‘ç°äº†ä¸å°‘é—®é¢˜çš„, å°¤å…¶æ˜¯é’ˆå¯¹å…¶ç¤ºä¾‹ä»£ç , å…¶å®æœ‰ä¸€äº›ä¾‹å­ä¸¾å¾—å¹¶ä¸æ°å½“(ä¸Šé¢ç¬”è®°æœ‰æåŠ). è€Œä¸”æ˜æ˜¾æœ‰å¼ºå…³è”çš„ä¸€äº›æ¨¡å¼ä¹‹é—´, å´å„ä¸¾å„çš„ä¾‹å­(å¦‚ä¸‰ä¸ªå·¥å‚). å¯¹äºç¨å¾®å¤æ‚çš„æ¨¡å¼, å¦‚(è§‚å¯Ÿè€…, è®¿é—®è€…), å†™çš„åˆè¿‡äºè‚¤æµ…, ä¾‹å­æµ®äºè¡¨é¢. æ„Ÿè§‰é‡ç‚¹ä¸å¤Ÿåˆ†æ˜, é€‚åˆæ¨å¹¿æ™®åŠ, å´ä¸è€å’€åš¼. å»ºè®®é…åˆå››äººå¸®é‚£æœ¬ä¹¦ä¸€èµ·å‚é˜…. (ä¸å¾—ä¸è¯´, é‚£æœ¬ä¹¦é‡Œé¢çš„ä¾‹å­, è´¨é‡ç›¸å½“é«˜)</p>
<p><strong>æœ€ååˆ’ä¸€ä¸‹é‡ç‚¹</strong>:</p>
<p>è¯´èµ·æ¥ 23 ç§è®¾è®¡æ¨¡å¼, å¾ˆå“äººçš„æ ·å­, å…¶å®åº”è¯¥é‡ç‚¹æŒæ¡çš„åªæœ‰å‡ ä¸ªè€Œå·²:</p>
<ul>
<li>åˆ›å»ºå‹æ¨¡å¼ä¸­, é‡ç‚¹æŒæ¡<strong>ä¸‰ä¸ªå·¥å‚, ä¸å•ä¾‹</strong>. ç®€å•å·¥å‚å®é™…ä¸Šç®—ä¸ä¸Šæ¨¡å¼(ä¹¦é‡Œéƒ½æ²¡å•ç‹¬åˆ—å‡º), å…³é”®å°±æ˜¯å·¥å‚æ–¹æ³•, æŠ½è±¡å·¥å‚åªä¸è¿‡æ˜¯å·¥å‚çš„å·¥å‚è€Œå·². é‚£ä¹ˆå·¥å‚æ–¹æ³•å…¶å®æŠ½è±¡çš„æ˜¯<code>new</code>çš„è¿‡ç¨‹, é‚£ä¹ˆå…³é”®å°±æ˜¯ <code>new</code> çš„ä¸¤è¾¹éƒ½åº”è¯¥æ˜¯æŠ½è±¡æ¥å£, å°è£…æ‰å…·ä½“å®ç°. å•ä¾‹æ¨¡å¼, è¦å…ˆäº†è§£å…¶å¼Šç«¯, ä½†é‚£ä¹Ÿæ˜¯å®ƒæœ€æ ¸å¿ƒçš„ç‰¹ç‚¹: å…¨å±€æ€§. è¿™ç©æ„ä¼šåœ¨å®é™…å¼€å‘ä¸­å¤§é‡ä½¿ç”¨, ä½†ç†æƒ³æƒ…å†µä¸‹åº”è¯¥æ˜¯é¿å…çš„. å‰©ä¸‹ä¿©: åŸå‹å°±æ˜¯ copy, ç”Ÿæˆå™¨å°±æ˜¯â€æ‹†è¿æ„é€ å™¨â€.</li>
<li><p>ç»“æ„å‹æ¨¡å¼ä¸­, é‡ç‚¹æŒæ¡<strong>æ¡¥æ¥</strong>, è¿™ä¸ªæ¨¡å¼æ˜¯é‡æ„ç¥å™¨. å¦‚æœé¢†å¯¼è¯´, è¿™ä¸ªç±»å¤ªå¤æ‚äº†, æŠŠå®ƒâ€æŠ½ä¸€æŠ½â€, â€œå•æ‹å‡ºæ¥â€. é‚£ä¹ˆåæœ‰å…«ä¹æ˜¯è¿ç”¨æ¡¥æ¥æ¨¡å¼. ç»“æ„å‹å…¶å®å¯ä»¥æŒ‰ä»¥ä¸‹åŸºæœ¬ç‰¹æ€§åˆ†ä¸ªç±»:</p>
<ul>
<li><strong>åŠ </strong>ä¸€å±‚: é€‚é…å™¨, å¤–è§‚, ä»£ç†</li>
<li><strong>å‡</strong>è‚¥: æ¡¥æ¥</li>
<li>å¸¸è§ç¼–ç¨‹æŠ€å·§: ç»„åˆ(å°±æ˜¯åŸºäºæ¥å£è¿­ä»£), äº«å…ƒ(å“ˆå¸Œè¡¨), è£…é¥°(ä¸æ–­å®ä¾‹åŒ–ä¿®æ”¹çˆ¶ç±»æˆå‘˜)</li>
</ul>
</li>
<li><p>è¡Œä¸ºå‹æ¨¡å¼ä¸­, é‡ç‚¹æŒæ¡<strong>è§‚å¯Ÿè€…</strong>å’Œ<strong>è®¿é—®è€…</strong>. è¡Œä¸ºå‹æ¨¡å¼éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç‰¹ç‚¹, å°±æ˜¯éå¸¸è®²ç©¶<strong>æ³¨å…¥</strong>å’Œ<strong>å›è°ƒ</strong>è¿™ä¸¤ä¸ªæ‰‹æ®µ. å°¤å…¶ä»¥è§‚å¯Ÿè€…ä¸è®¿é—®è€…, ç”¨çš„ç™»å³°é€ æ. å‰è€…æ˜¯æ‰€æœ‰æ¶ˆæ¯ç³»ç»Ÿçš„çµé­‚, é‡ç‚¹æŒæ¡æ¶ˆæ¯åˆ—è¡¨, ä¸é€šçŸ¥çš„æ—¶æœº. åè€…æ˜¯è‘—åçš„<strong>IoC(æ§åˆ¶åè½¬)</strong>ä¸<strong>DI(ä¾èµ–æ³¨å…¥)</strong>çš„çµé­‚. è¿™ä¹Ÿæ˜¯ç»´æŠ¤è€ç³»ç»Ÿå¿…å¤‡çš„æŠ€å·§. å®ƒçš„é‡ç‚¹æ˜¯åœ¨<strong>ä¸ç ´åå·²æœ‰æ¥å£</strong>çš„å‰æä¸‹, å¦‚ä½•å¢åŠ æ–°çš„ç‰¹æ€§. å‰©ä¸‹çš„æ¨¡å¼æˆ‘ä»¬ä¹Ÿå¤§è‡´åˆ†ä¸ªç±»:</p>
<ul>
<li>åŸºæœ¬æ•°æ®ç»“æ„åœ¨é¢å‘å¯¹è±¡çš„ä½“ç°: è´£ä»»é“¾(å¯¹è±¡é“¾è¡¨è½®è¯¢), å‘½ä»¤(ACID), è¿­ä»£å™¨(C++ ä¸­çš„ iterator), å¤‡å¿˜å½•(ç¼“å­˜çŠ¶æ€), çŠ¶æ€(çŠ¶æ€æœº)</li>
<li>DI: ä¸­ä»‹è€…(æ³¨å…¥ä¸­ä»‹), è§‚å¯Ÿè€…(æ³¨å…¥è®¢é˜…è€…), è®¿é—®è€…(æ³¨å…¥è®¿é—®æ¥å£), ç­–ç•¥(æ³¨å…¥ç®—æ³•å¯¹è±¡)</li>
<li>å¸¸è§ç¼–ç¨‹æŠ€å·§: æ¨¡æ¿æ–¹æ³•(å›ºå®šæ¥å£, å­ç±»å®ç°)</li>
</ul>
</li>
</ul>
<p>Tips: ä¸åŒå¤§ç±»çš„æ¨¡å¼, ä¹Ÿè®¸åå­—å¬ç€ç±»ä¼¼, ä½†å®è´¨å´å®Œå…¨ä¸åŒ. å¦‚ä¸­ä»‹è€…, ä¸é€‚é…å™¨, ä»£ç†, æ„Ÿè§‰å°±å¾ˆç±»ä¼¼. ä½†ä¸­ä»‹è€…æ˜¯è¢«<strong>æ³¨å…¥</strong>åèµ·åˆ°ä½œç”¨çš„, åä¸¤è€…å´æ˜¯<strong>åœ¨ç»“æ„ä¸Š</strong>å¢åŠ äº†ä¸€å±‚.</p>
<p>åˆ’å‡ºçš„å‡ ä¸ªé‡ç‚¹ä¹Ÿæ˜¯é¢è¯•å¸¸å¸¸è€ƒå¯Ÿçš„: å·¥å‚, å•ä¾‹, æ¡¥æ¥, è§‚å¯Ÿè€…, è®¿é—®è€…. å…¶ä½™è¦ä¹ˆè¿‡äºç®€å•, æ²¡å•¥å¥½è€ƒå¯Ÿçš„; è¦ä¹ˆå·²ç»å’Œè¯­è¨€ç‰¹æ€§å¯†ä¸å¯åˆ†, é—®èµ·æ¥å®¹æ˜“è¢«ç»•è¿‡å». ä½†è¿™äº”è€…, å´å¾ˆå…·å¤‡è€ƒå¯Ÿæ€§, è¦æ˜¯èƒ½æ•°æ¸…æ¥š, è®¾è®¡æ¨¡å¼å°±ç®—æŒæ¡äº†.</p>
<p>æ‰€æœ‰ç¤ºä¾‹ä»£ç è¯·è§: <a href="https://github.com/pezy/DesignPatterns" target="_blank" rel="noopener">https://github.com/pezy/Desigâ€¦</a></p>
<h3 id="I-donâ€™t-need-freedom"><a href="#I-donâ€™t-need-freedom" class="headerlink" title="I donâ€™t need freedom."></a>I donâ€™t need freedom.</h3><p>More info: <a href="http://shierb.top" target="_blank" rel="noopener">shierb</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2017/08/18/è®¾è®¡æ¨¡å¼/" data-id="cjudhakuu0013xix6uw9kvvr4" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/09/18/IDEAå¿«æ·é”®/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          IDEAå¿«æ·é”®
        
      </div>
    </a>
  
  
    <a href="/2017/08/18/è¡¨è¾¾çˆ±æƒ…/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">è¡¨è¾¾çˆ±æƒ…</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDEA/">IDEA</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¤§æ•°æ®/">å¤§æ•°æ®</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/å¿ƒæƒ…/">å¿ƒæƒ…</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æœé›†/">æœé›†</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ— èŠ/">æ— èŠ</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/æ·±åº¦/">æ·±åº¦</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/è®¾è®¡æ¨¡å¼/">è®¾è®¡æ¨¡å¼</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/IDEA/" style="font-size: 10px;">IDEA</a> <a href="/tags/å¤§æ•°æ®/" style="font-size: 10px;">å¤§æ•°æ®</a> <a href="/tags/å¿ƒæƒ…/" style="font-size: 10px;">å¿ƒæƒ…</a> <a href="/tags/æœé›†/" style="font-size: 20px;">æœé›†</a> <a href="/tags/æ— èŠ/" style="font-size: 15px;">æ— èŠ</a> <a href="/tags/æ·±åº¦/" style="font-size: 10px;">æ·±åº¦</a> <a href="/tags/è®¾è®¡æ¨¡å¼/" style="font-size: 10px;">è®¾è®¡æ¨¡å¼</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/3014/07/">July 3014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/09/">September 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/3014/07/07/ä¸ªäººå¿ƒæƒ…/">ä¸ªäººå¿ƒæƒ…</a>
          </li>
        
          <li>
            <a href="/2020/05/20/JAVAæ±‡æ€»/">JAVAæ±‡æ€»</a>
          </li>
        
          <li>
            <a href="/2018/05/07/é¢˜é¢˜é¢˜é¢˜/">é¢˜é¢˜é¢˜é¢˜</a>
          </li>
        
          <li>
            <a href="/2017/12/19/æ·±åº¦å·¥ä½œ/">æ·±åº¦å·¥ä½œ</a>
          </li>
        
          <li>
            <a href="/2017/09/18/IDEAå¿«æ·é”®/">IDEAå¿«æ·é”®</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>